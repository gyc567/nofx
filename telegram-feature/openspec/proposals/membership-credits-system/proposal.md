# ä¼šå‘˜ç§¯åˆ†å¥—é¤ä½“ç³»ææ¡ˆ

## ææ¡ˆæ¦‚è¿°

**ææ¡ˆæ ‡é¢˜**: Monnaire Trading Agent OS ä¼šå‘˜ç§¯åˆ†å¥—é¤ä½“ç³»  
**ææ¡ˆç±»å‹**: æ ¸å¿ƒå•†ä¸šåŠŸèƒ½ / ä»˜è´¹ç³»ç»Ÿ  
**ä¼˜å…ˆçº§**: P0 (æœ€é«˜ä¼˜å…ˆçº§)  
**é¢„è®¡å·¥ä½œé‡**: 7-10å¤©  
**é¢„ä¼°ä»·å€¼**: $1,500 USD  

## æ‰§è¡Œæ‘˜è¦

æœ¬ææ¡ˆæ—¨åœ¨ä¸º Monnaire Trading Agent OS æ„å»ºä¸€å¥—å®Œæ•´çš„ä¼šå‘˜ç§¯åˆ†å¥—é¤ä½“ç³»ï¼Œå®ç°å¹³å°å•†ä¸šåŒ–å˜ç°ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§å¥—é¤é…ç½®ï¼ˆå¦‚ 10U/500ç§¯åˆ†ã€5U/200ç§¯åˆ†ï¼‰ï¼Œæ‰€æœ‰å¥—é¤ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ”¯æŒåŠ¨æ€ç®¡ç†ã€‚ç§¯åˆ†å¯ç”¨äºè§£é”é«˜çº§åŠŸèƒ½ã€å¢åŠ äº¤æ˜“å‘˜æ•°é‡é™åˆ¶ã€è·å–ä¼˜å…ˆä¿¡å·ç­‰ã€‚

## èƒŒæ™¯ä¸åŠ¨æœº

### å½“å‰çŠ¶å†µ

Monnaire Trading Agent OS ç›®å‰æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ AI äº¤æ˜“ç³»ç»Ÿï¼Œä½†ç¼ºä¹å•†ä¸šåŒ–å˜ç°æœºåˆ¶ï¼š
- ç”¨æˆ·å¯ä»¥å…è´¹ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½
- æ²¡æœ‰ä»˜è´¹å¢™æˆ–åŠŸèƒ½é™åˆ¶
- æ— æ³•åŒºåˆ†å…è´¹ç”¨æˆ·å’Œä»˜è´¹ç”¨æˆ·
- ç¼ºä¹å¯æŒç»­çš„æ”¶å…¥æ¥æº

### ä¸šåŠ¡éœ€æ±‚

1. **å»ºç«‹å¯æŒç»­çš„å•†ä¸šæ¨¡å¼**
   - é€šè¿‡ç§¯åˆ†å¥—é¤å®ç°æ”¶å…¥
   - æ”¯æŒå¤šç§å®šä»·ç­–ç•¥
   - çµæ´»çš„å¥—é¤é…ç½®

2. **ç”¨æˆ·åˆ†å±‚ç®¡ç†**
   - åŒºåˆ†å…è´¹ç”¨æˆ·å’Œä»˜è´¹ç”¨æˆ·
   - æä¾›å·®å¼‚åŒ–æœåŠ¡
   - æ¿€åŠ±ç”¨æˆ·ä»˜è´¹å‡çº§

3. **åŠŸèƒ½è§£é”æœºåˆ¶**
   - åŸºç¡€åŠŸèƒ½å…è´¹
   - é«˜çº§åŠŸèƒ½éœ€è¦ç§¯åˆ†
   - æŒ‰éœ€ä»˜è´¹æ¨¡å¼

### å¸‚åœºåˆ†æ

| ç«å“ | å®šä»·æ¨¡å¼ | æœˆè´¹èŒƒå›´ |
|------|----------|----------|
| 3Commas | è®¢é˜…åˆ¶ | $29-$99/æœˆ |
| Cryptohopper | è®¢é˜…åˆ¶ | $19-$99/æœˆ |
| Pionex | å…è´¹+VIP | $0-$50/æœˆ |
| **Monnaire (æœ¬æ–¹æ¡ˆ)** | **ç§¯åˆ†åˆ¶** | **çµæ´»å®šä»·** |

ç§¯åˆ†åˆ¶çš„ä¼˜åŠ¿ï¼š
- ç”¨æˆ·æŒ‰éœ€è´­ä¹°ï¼Œé™ä½å…¥é—¨é—¨æ§›
- çµæ´»æ¶ˆè´¹ï¼Œä¸æµªè´¹
- æ”¯æŒä¿ƒé”€å’Œèµ é€
- æ˜“äºæ‰©å±•æ–°åŠŸèƒ½

## ç›®æ ‡

### ä¸»è¦ç›®æ ‡

1. **æ„å»ºå®Œæ•´çš„ç§¯åˆ†ç³»ç»Ÿ**
   - ç§¯åˆ†è´­ä¹°ã€æ¶ˆè´¹ã€æŸ¥è¯¢
   - ç§¯åˆ†æœ‰æ•ˆæœŸç®¡ç†
   - ç§¯åˆ†æµæ°´è®°å½•

2. **å®ç°çµæ´»çš„å¥—é¤ç®¡ç†**
   - å¥—é¤ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“
   - æ”¯æŒåŠ¨æ€å¢åˆ æ”¹å¥—é¤
   - æ”¯æŒä¿ƒé”€å’ŒæŠ˜æ‰£

3. **å»ºç«‹åŠŸèƒ½è§£é”æœºåˆ¶**
   - å®šä¹‰ç§¯åˆ†æ¶ˆè´¹è§„åˆ™
   - å®ç°åŠŸèƒ½æƒé™æ§åˆ¶
   - æ”¯æŒæŒ‰æ¬¡/æŒ‰æ—¶è®¡è´¹

4. **æä¾›ç®¡ç†åå°**
   - å¥—é¤ç®¡ç†
   - ç”¨æˆ·ç§¯åˆ†ç®¡ç†
   - äº¤æ˜“è®°å½•æŸ¥è¯¢
   - æ•°æ®ç»Ÿè®¡åˆ†æ

### æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| ä»˜è´¹è½¬åŒ–ç‡ | >5% | å…è´¹ç”¨æˆ·è½¬ä»˜è´¹ç”¨æˆ· |
| ARPU | >$15/æœˆ | å¹³å‡æ¯ç”¨æˆ·æ”¶å…¥ |
| ç§¯åˆ†æ¶ˆè€—ç‡ | >70% | è´­ä¹°ç§¯åˆ†çš„ä½¿ç”¨ç‡ |
| ç³»ç»Ÿå¯ç”¨æ€§ | >99.9% | ç§¯åˆ†ç³»ç»Ÿç¨³å®šæ€§ |

## åŠŸèƒ½éœ€æ±‚

### 1. å¥—é¤ç®¡ç†æ¨¡å—

#### 1.1 å¥—é¤æ•°æ®æ¨¡å‹

```go
// CreditPackage ç§¯åˆ†å¥—é¤
type CreditPackage struct {
    ID              string    `json:"id"`               // å¥—é¤ID (UUID)
    Name            string    `json:"name"`             // å¥—é¤åç§°
    NameEN          string    `json:"name_en"`          // è‹±æ–‡åç§°
    Description     string    `json:"description"`      // å¥—é¤æè¿°
    DescriptionEN   string    `json:"description_en"`   // è‹±æ–‡æè¿°
    PriceUSDT       float64   `json:"price_usdt"`       // ä»·æ ¼(USDT)
    Credits         int       `json:"credits"`          // ç§¯åˆ†æ•°é‡
    BonusCredits    int       `json:"bonus_credits"`    // èµ é€ç§¯åˆ†
    ValidDays       int       `json:"valid_days"`       // æœ‰æ•ˆæœŸ(å¤©)ï¼Œ0è¡¨ç¤ºæ°¸ä¹…
    IsActive        bool      `json:"is_active"`        // æ˜¯å¦å¯ç”¨
    IsRecommended   bool      `json:"is_recommended"`   // æ˜¯å¦æ¨èå¥—é¤
    SortOrder       int       `json:"sort_order"`       // æ’åºé¡ºåº
    MaxPurchase     int       `json:"max_purchase"`     // å•ç”¨æˆ·æœ€å¤§è´­ä¹°æ¬¡æ•°ï¼Œ0è¡¨ç¤ºæ— é™
    CreatedAt       time.Time `json:"created_at"`
    UpdatedAt       time.Time `json:"updated_at"`
}
```

#### 1.2 åˆå§‹å¥—é¤é…ç½®

| å¥—é¤åç§° | ä»·æ ¼(USDT) | ç§¯åˆ† | èµ é€ | æ€»ç§¯åˆ† | å•ä»· | æœ‰æ•ˆæœŸ |
|----------|------------|------|------|--------|------|--------|
| å…¥é—¨å¥—é¤ | 5 U | 200 | 0 | 200 | 0.025 U/ç§¯åˆ† | æ°¸ä¹… |
| æ ‡å‡†å¥—é¤ | 10 U | 500 | 50 | 550 | 0.018 U/ç§¯åˆ† | æ°¸ä¹… |
| é«˜çº§å¥—é¤ | 25 U | 1500 | 200 | 1700 | 0.015 U/ç§¯åˆ† | æ°¸ä¹… |
| ä¸“ä¸šå¥—é¤ | 50 U | 3500 | 500 | 4000 | 0.0125 U/ç§¯åˆ† | æ°¸ä¹… |
| ä¼ä¸šå¥—é¤ | 100 U | 8000 | 2000 | 10000 | 0.01 U/ç§¯åˆ† | æ°¸ä¹… |

#### 1.3 å¥—é¤ç®¡ç†åŠŸèƒ½

- **åˆ›å»ºå¥—é¤**: ç®¡ç†å‘˜å¯åˆ›å»ºæ–°å¥—é¤
- **ç¼–è¾‘å¥—é¤**: ä¿®æ”¹å¥—é¤ä¿¡æ¯ï¼ˆä¸å½±å“å·²è´­ä¹°ç”¨æˆ·ï¼‰
- **å¯ç”¨/ç¦ç”¨**: æ§åˆ¶å¥—é¤æ˜¯å¦å¯è´­ä¹°
- **åˆ é™¤å¥—é¤**: è½¯åˆ é™¤ï¼Œä¿ç•™å†å²è®°å½•
- **æ’åºç®¡ç†**: è°ƒæ•´å¥—é¤æ˜¾ç¤ºé¡ºåº
- **ä¿ƒé”€è®¾ç½®**: ä¸´æ—¶æŠ˜æ‰£ã€é™æ—¶ä¼˜æƒ 

### 2. ç”¨æˆ·ç§¯åˆ†æ¨¡å—

#### 2.1 ç”¨æˆ·ç§¯åˆ†æ•°æ®æ¨¡å‹

```go
// UserCredits ç”¨æˆ·ç§¯åˆ†è´¦æˆ·
type UserCredits struct {
    ID              string    `json:"id"`
    UserID          string    `json:"user_id"`
    TotalCredits    int       `json:"total_credits"`     // æ€»ç§¯åˆ†ï¼ˆå†å²ç´¯è®¡è´­ä¹°ï¼‰
    AvailableCredits int      `json:"available_credits"` // å¯ç”¨ç§¯åˆ†
    FrozenCredits   int       `json:"frozen_credits"`    // å†»ç»“ç§¯åˆ†ï¼ˆå¤„ç†ä¸­çš„è®¢å•ï¼‰
    UsedCredits     int       `json:"used_credits"`      // å·²ä½¿ç”¨ç§¯åˆ†
    ExpiredCredits  int       `json:"expired_credits"`   // å·²è¿‡æœŸç§¯åˆ†
    CreatedAt       time.Time `json:"created_at"`
    UpdatedAt       time.Time `json:"updated_at"`
}

// CreditBalance ç§¯åˆ†ä½™é¢æ˜ç»†ï¼ˆæ”¯æŒä¸åŒæœ‰æ•ˆæœŸçš„ç§¯åˆ†åˆ†å¼€ç®¡ç†ï¼‰
type CreditBalance struct {
    ID              string    `json:"id"`
    UserID          string    `json:"user_id"`
    Credits         int       `json:"credits"`           // ç§¯åˆ†æ•°é‡
    RemainingCredits int      `json:"remaining_credits"` // å‰©ä½™ç§¯åˆ†
    SourceType      string    `json:"source_type"`       // æ¥æºç±»å‹: purchase/bonus/gift/refund
    SourceID        string    `json:"source_id"`         // æ¥æºIDï¼ˆè®¢å•IDç­‰ï¼‰
    ExpiresAt       *time.Time `json:"expires_at"`       // è¿‡æœŸæ—¶é—´ï¼Œnullè¡¨ç¤ºæ°¸ä¹…
    CreatedAt       time.Time `json:"created_at"`
}
```

#### 2.2 ç§¯åˆ†æµæ°´è®°å½•

```go
// CreditTransaction ç§¯åˆ†æµæ°´
type CreditTransaction struct {
    ID              string    `json:"id"`
    UserID          string    `json:"user_id"`
    Type            string    `json:"type"`              // ç±»å‹: credit(å¢åŠ )/debit(æ‰£å‡)
    Amount          int       `json:"amount"`            // ç§¯åˆ†æ•°é‡
    BalanceBefore   int       `json:"balance_before"`    // å˜åŠ¨å‰ä½™é¢
    BalanceAfter    int       `json:"balance_after"`     // å˜åŠ¨åä½™é¢
    Category        string    `json:"category"`          // åˆ†ç±»: purchase/consume/gift/refund/expire/admin
    Description     string    `json:"description"`       // æè¿°
    ReferenceType   string    `json:"reference_type"`    // å…³è”ç±»å‹: order/feature/admin
    ReferenceID     string    `json:"reference_id"`      // å…³è”ID
    CreatedAt       time.Time `json:"created_at"`
}
```

#### 2.3 ç§¯åˆ†æ“ä½œæ¥å£

```go
// CreditService ç§¯åˆ†æœåŠ¡æ¥å£
type CreditService interface {
    // æŸ¥è¯¢
    GetUserCredits(userID string) (*UserCredits, error)
    GetCreditBalances(userID string) ([]*CreditBalance, error)
    GetCreditTransactions(userID string, page, limit int) ([]*CreditTransaction, int, error)
    
    // ç§¯åˆ†æ“ä½œ
    AddCredits(userID string, amount int, sourceType, sourceID string, expiresAt *time.Time) error
    DeductCredits(userID string, amount int, category, description, refType, refID string) error
    FreezeCredits(userID string, amount int, reason string) error
    UnfreezeCredits(userID string, amount int, reason string) error
    
    // æ£€æŸ¥
    HasEnoughCredits(userID string, amount int) bool
    GetExpiringCredits(userID string, days int) (int, error)
}
```

### 3. è®¢å•æ”¯ä»˜æ¨¡å—

#### 3.1 è®¢å•æ•°æ®æ¨¡å‹

```go
// CreditOrder ç§¯åˆ†è´­ä¹°è®¢å•
type CreditOrder struct {
    ID              string    `json:"id"`               // è®¢å•ID
    OrderNo         string    `json:"order_no"`         // è®¢å•å· (æ ¼å¼: CR + æ—¶é—´æˆ³ + éšæœºæ•°)
    UserID          string    `json:"user_id"`
    PackageID       string    `json:"package_id"`       // å¥—é¤ID
    PackageName     string    `json:"package_name"`     // å¥—é¤åç§°ï¼ˆå¿«ç…§ï¼‰
    PriceUSDT       float64   `json:"price_usdt"`       // æ”¯ä»˜é‡‘é¢
    Credits         int       `json:"credits"`          // è´­ä¹°ç§¯åˆ†
    BonusCredits    int       `json:"bonus_credits"`    // èµ é€ç§¯åˆ†
    TotalCredits    int       `json:"total_credits"`    // æ€»ç§¯åˆ†
    Status          string    `json:"status"`           // çŠ¶æ€: pending/paid/completed/cancelled/refunded
    PaymentMethod   string    `json:"payment_method"`   // æ”¯ä»˜æ–¹å¼: usdt_trc20/usdt_erc20/usdt_bep20
    PaymentAddress  string    `json:"payment_address"`  // æ”¶æ¬¾åœ°å€
    PaymentTxHash   string    `json:"payment_tx_hash"`  // æ”¯ä»˜äº¤æ˜“å“ˆå¸Œ
    PaidAt          *time.Time `json:"paid_at"`         // æ”¯ä»˜æ—¶é—´
    CompletedAt     *time.Time `json:"completed_at"`    // å®Œæˆæ—¶é—´
    ExpiresAt       time.Time `json:"expires_at"`       // è®¢å•è¿‡æœŸæ—¶é—´ï¼ˆæœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆï¼‰
    Remark          string    `json:"remark"`           // å¤‡æ³¨
    CreatedAt       time.Time `json:"created_at"`
    UpdatedAt       time.Time `json:"updated_at"`
}
```

#### 3.2 æ”¯ä»˜æµç¨‹

```
ç”¨æˆ·é€‰æ‹©å¥—é¤ â†’ åˆ›å»ºè®¢å• â†’ ç”Ÿæˆæ”¶æ¬¾åœ°å€ â†’ ç”¨æˆ·è½¬è´¦ â†’ 
é“¾ä¸Šç¡®è®¤ â†’ è®¢å•å®Œæˆ â†’ ç§¯åˆ†åˆ°è´¦ â†’ å‘é€é€šçŸ¥
```

**è¯¦ç»†æµç¨‹**:

1. **åˆ›å»ºè®¢å•**
   - ç”¨æˆ·é€‰æ‹©å¥—é¤
   - ç³»ç»Ÿç”Ÿæˆå”¯ä¸€è®¢å•å·
   - è®¾ç½®è®¢å•è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤30åˆ†é’Ÿï¼‰
   - ç”Ÿæˆ/åˆ†é…æ”¶æ¬¾åœ°å€

2. **ç­‰å¾…æ”¯ä»˜**
   - æ˜¾ç¤ºæ”¶æ¬¾åœ°å€å’Œé‡‘é¢
   - æ˜¾ç¤ºå€’è®¡æ—¶
   - æ”¯æŒå¤åˆ¶åœ°å€å’Œé‡‘é¢

3. **æ”¯ä»˜ç¡®è®¤**
   - ç›‘å¬é“¾ä¸Šäº¤æ˜“
   - éªŒè¯é‡‘é¢å’Œåœ°å€
   - ç­‰å¾…è¶³å¤Ÿç¡®è®¤æ•°ï¼ˆTRC20: 20ç¡®è®¤ï¼ŒERC20: 12ç¡®è®¤ï¼‰

4. **è®¢å•å®Œæˆ**
   - æ›´æ–°è®¢å•çŠ¶æ€
   - å‘æ”¾ç§¯åˆ†åˆ°ç”¨æˆ·è´¦æˆ·
   - è®°å½•ç§¯åˆ†æµæ°´
   - å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶/Telegramï¼‰

5. **å¼‚å¸¸å¤„ç†**
   - é‡‘é¢ä¸è¶³ï¼šæ ‡è®°å¾…å¤„ç†ï¼Œäººå·¥ä»‹å…¥
   - è¶…æ—¶æœªæ”¯ä»˜ï¼šè‡ªåŠ¨å–æ¶ˆè®¢å•
   - é‡å¤æ”¯ä»˜ï¼šè®°å½•å¹¶äººå·¥å¤„ç†é€€æ¬¾

#### 3.3 æ”¯ä»˜æ–¹å¼é…ç½®

```go
// PaymentMethod æ”¯ä»˜æ–¹å¼é…ç½®
type PaymentMethod struct {
    ID              string    `json:"id"`
    Name            string    `json:"name"`             // æ˜¾ç¤ºåç§°
    Code            string    `json:"code"`             // ä»£ç : usdt_trc20
    Network         string    `json:"network"`          // ç½‘ç»œ: tron/ethereum/bsc
    Currency        string    `json:"currency"`         // å¸ç§: USDT
    ContractAddress string    `json:"contract_address"` // åˆçº¦åœ°å€
    WalletAddress   string    `json:"wallet_address"`   // æ”¶æ¬¾é’±åŒ…åœ°å€
    Confirmations   int       `json:"confirmations"`    // éœ€è¦ç¡®è®¤æ•°
    MinAmount       float64   `json:"min_amount"`       // æœ€å°é‡‘é¢
    MaxAmount       float64   `json:"max_amount"`       // æœ€å¤§é‡‘é¢
    IsActive        bool      `json:"is_active"`
    SortOrder       int       `json:"sort_order"`
    CreatedAt       time.Time `json:"created_at"`
}
```

**æ”¯æŒçš„æ”¯ä»˜ç½‘ç»œ**:

| ç½‘ç»œ | å¸ç§ | ç¡®è®¤æ•° | æ‰‹ç»­è´¹ | åˆ°è´¦æ—¶é—´ |
|------|------|--------|--------|----------|
| TRON (TRC20) | USDT | 20 | ~1 USDT | ~1åˆ†é’Ÿ |
| Ethereum (ERC20) | USDT | 12 | ~5-20 USDT | ~3åˆ†é’Ÿ |
| BSC (BEP20) | USDT | 15 | ~0.5 USDT | ~1åˆ†é’Ÿ |

### 4. ç§¯åˆ†æ¶ˆè´¹æ¨¡å—

#### 4.1 æ¶ˆè´¹é¡¹ç›®é…ç½®

```go
// CreditConsumptionItem ç§¯åˆ†æ¶ˆè´¹é¡¹ç›®
type CreditConsumptionItem struct {
    ID              string    `json:"id"`
    Code            string    `json:"code"`             // é¡¹ç›®ä»£ç 
    Name            string    `json:"name"`             // é¡¹ç›®åç§°
    NameEN          string    `json:"name_en"`
    Description     string    `json:"description"`
    Category        string    `json:"category"`         // åˆ†ç±»: feature/limit/service
    CostType        string    `json:"cost_type"`        // è®¡è´¹ç±»å‹: once/daily/monthly/per_use
    CostCredits     int       `json:"cost_credits"`     // æ¶ˆè´¹ç§¯åˆ†
    IsActive        bool      `json:"is_active"`
    CreatedAt       time.Time `json:"created_at"`
}
```

#### 4.2 ç§¯åˆ†æ¶ˆè´¹é¡¹ç›®æ¸…å•

| é¡¹ç›®ä»£ç  | é¡¹ç›®åç§° | åˆ†ç±» | è®¡è´¹æ–¹å¼ | ç§¯åˆ†/æ¬¡ | è¯´æ˜ |
|----------|----------|------|----------|---------|------|
| `trader_create` | åˆ›å»ºäº¤æ˜“å‘˜ | limit | å•æ¬¡ | 50 | æ¯åˆ›å»ºä¸€ä¸ªäº¤æ˜“å‘˜æ¶ˆè€— |
| `trader_run_daily` | äº¤æ˜“å‘˜è¿è¡Œ | feature | æ¯æ—¥ | 10 | æ¯ä¸ªè¿è¡Œä¸­çš„äº¤æ˜“å‘˜æ¯æ—¥æ¶ˆè€— |
| `ai_decision` | AIå†³ç­–è°ƒç”¨ | per_use | æŒ‰æ¬¡ | 1 | æ¯æ¬¡AIå†³ç­–æ¶ˆè€— |
| `signal_premium` | é«˜çº§ä¿¡å· | feature | æ¯æ—¥ | 5 | è®¢é˜…é«˜çº§ä¿¡å·æº |
| `telegram_signal` | Telegramä¿¡å·æ¨é€ | feature | æ¯æœˆ | 100 | å¼€é€šTelegramä¿¡å·æ¨é€ |
| `api_access` | APIè®¿é—®æƒé™ | feature | æ¯æœˆ | 200 | å¼€é€šAPIè®¿é—®æƒé™ |
| `priority_support` | ä¼˜å…ˆå®¢æœ | service | æ¯æœˆ | 50 | ä¼˜å…ˆå®¢æœæ”¯æŒ |
| `custom_prompt` | è‡ªå®šä¹‰Prompt | feature | å•æ¬¡ | 20 | è§£é”è‡ªå®šä¹‰PromptåŠŸèƒ½ |
| `backtest` | ç­–ç•¥å›æµ‹ | per_use | æŒ‰æ¬¡ | 5 | æ¯æ¬¡å›æµ‹æ¶ˆè€— |
| `export_data` | æ•°æ®å¯¼å‡º | per_use | æŒ‰æ¬¡ | 10 | å¯¼å‡ºäº¤æ˜“æ•°æ® |

#### 4.3 å…è´¹é¢åº¦é…ç½®

```go
// FreeQuota å…è´¹é¢åº¦é…ç½®
type FreeQuota struct {
    ID              string    `json:"id"`
    ItemCode        string    `json:"item_code"`        // æ¶ˆè´¹é¡¹ç›®ä»£ç 
    QuotaType       string    `json:"quota_type"`       // é¢åº¦ç±»å‹: daily/monthly/total
    QuotaAmount     int       `json:"quota_amount"`     // å…è´¹é¢åº¦
    IsActive        bool      `json:"is_active"`
    CreatedAt       time.Time `json:"created_at"`
}
```

**é»˜è®¤å…è´¹é¢åº¦**:

| é¡¹ç›® | å…è´¹é¢åº¦ | å‘¨æœŸ | è¯´æ˜ |
|------|----------|------|------|
| åˆ›å»ºäº¤æ˜“å‘˜ | 1ä¸ª | æ°¸ä¹… | æ–°ç”¨æˆ·å¯å…è´¹åˆ›å»º1ä¸ªäº¤æ˜“å‘˜ |
| AIå†³ç­–è°ƒç”¨ | 100æ¬¡ | æ¯æœˆ | æ¯æœˆ100æ¬¡å…è´¹AIå†³ç­– |
| ç­–ç•¥å›æµ‹ | 5æ¬¡ | æ¯æœˆ | æ¯æœˆ5æ¬¡å…è´¹å›æµ‹ |

### 5. ä¼šå‘˜ç­‰çº§æ¨¡å—

#### 5.1 ä¼šå‘˜ç­‰çº§æ•°æ®æ¨¡å‹

```go
// MembershipLevel ä¼šå‘˜ç­‰çº§
type MembershipLevel struct {
    ID              string    `json:"id"`
    Code            string    `json:"code"`             // ç­‰çº§ä»£ç : free/bronze/silver/gold/platinum
    Name            string    `json:"name"`             // ç­‰çº§åç§°
    NameEN          string    `json:"name_en"`
    MinCredits      int       `json:"min_credits"`      // æœ€ä½ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
    MaxCredits      int       `json:"max_credits"`      // æœ€é«˜ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
    DiscountRate    float64   `json:"discount_rate"`    // ç§¯åˆ†æ¶ˆè´¹æŠ˜æ‰£ç‡ (0.9 = 9æŠ˜)
    BonusRate       float64   `json:"bonus_rate"`       // è´­ä¹°ç§¯åˆ†èµ é€æ¯”ä¾‹ (0.1 = 10%)
    MaxTraders      int       `json:"max_traders"`      // æœ€å¤§äº¤æ˜“å‘˜æ•°é‡
    PriorityLevel   int       `json:"priority_level"`   // ä¼˜å…ˆçº§ï¼ˆä¿¡å·æ¨é€ç­‰ï¼‰
    Benefits        string    `json:"benefits"`         // æƒç›Šè¯´æ˜ (JSON)
    IconURL         string    `json:"icon_url"`         // ç­‰çº§å›¾æ ‡
    Color           string    `json:"color"`            // ç­‰çº§é¢œè‰²
    SortOrder       int       `json:"sort_order"`
    IsActive        bool      `json:"is_active"`
    CreatedAt       time.Time `json:"created_at"`
}
```

#### 5.2 ä¼šå‘˜ç­‰çº§é…ç½®

| ç­‰çº§ | ä»£ç  | ç´¯è®¡æ¶ˆè´¹ | æŠ˜æ‰£ | è´­ä¹°èµ é€ | æœ€å¤§äº¤æ˜“å‘˜ | æƒç›Š |
|------|------|----------|------|----------|------------|------|
| å…è´¹ä¼šå‘˜ | free | 0 | æ—  | æ—  | 1 | åŸºç¡€åŠŸèƒ½ |
| é’é“œä¼šå‘˜ | bronze | 500+ | 95æŠ˜ | 5% | 3 | åŸºç¡€+ä¼˜å…ˆä¿¡å· |
| ç™½é“¶ä¼šå‘˜ | silver | 2000+ | 90æŠ˜ | 10% | 5 | é’é“œ+APIè®¿é—® |
| é»„é‡‘ä¼šå‘˜ | gold | 5000+ | 85æŠ˜ | 15% | 10 | ç™½é“¶+ä¼˜å…ˆå®¢æœ |
| é“‚é‡‘ä¼šå‘˜ | platinum | 10000+ | 80æŠ˜ | 20% | æ— é™ | å…¨éƒ¨æƒç›Š+ä¸“å±é¡¾é—® |

#### 5.3 ç”¨æˆ·ä¼šå‘˜ä¿¡æ¯

```go
// UserMembership ç”¨æˆ·ä¼šå‘˜ä¿¡æ¯
type UserMembership struct {
    ID                  string    `json:"id"`
    UserID              string    `json:"user_id"`
    LevelCode           string    `json:"level_code"`           // å½“å‰ç­‰çº§
    TotalPurchased      int       `json:"total_purchased"`      // ç´¯è®¡è´­ä¹°ç§¯åˆ†
    TotalConsumed       int       `json:"total_consumed"`       // ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
    CurrentMonthPurchased int     `json:"current_month_purchased"` // æœ¬æœˆè´­ä¹°
    CurrentMonthConsumed int      `json:"current_month_consumed"`  // æœ¬æœˆæ¶ˆè´¹
    LevelUpAt           *time.Time `json:"level_up_at"`          // å‡çº§æ—¶é—´
    CreatedAt           time.Time `json:"created_at"`
    UpdatedAt           time.Time `json:"updated_at"`
}
```

### 6. æ•°æ®åº“è®¾è®¡

#### 6.1 å®Œæ•´è¡¨ç»“æ„

```sql
-- ç§¯åˆ†å¥—é¤è¡¨
CREATE TABLE credit_packages (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    name_en TEXT,
    description TEXT,
    description_en TEXT,
    price_usdt DECIMAL(10,2) NOT NULL,
    credits INTEGER NOT NULL,
    bonus_credits INTEGER DEFAULT 0,
    valid_days INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    is_recommended BOOLEAN DEFAULT false,
    sort_order INTEGER DEFAULT 0,
    max_purchase INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ·ç§¯åˆ†è´¦æˆ·è¡¨
CREATE TABLE user_credits (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL UNIQUE REFERENCES users(id),
    total_credits INTEGER DEFAULT 0,
    available_credits INTEGER DEFAULT 0,
    frozen_credits INTEGER DEFAULT 0,
    used_credits INTEGER DEFAULT 0,
    expired_credits INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç§¯åˆ†ä½™é¢æ˜ç»†è¡¨ï¼ˆæ”¯æŒä¸åŒæœ‰æ•ˆæœŸï¼‰
CREATE TABLE credit_balances (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL REFERENCES users(id),
    credits INTEGER NOT NULL,
    remaining_credits INTEGER NOT NULL,
    source_type TEXT NOT NULL,
    source_id TEXT,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_expires (user_id, expires_at)
);

-- ç§¯åˆ†æµæ°´è¡¨
CREATE TABLE credit_transactions (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL REFERENCES users(id),
    type TEXT NOT NULL,
    amount INTEGER NOT NULL,
    balance_before INTEGER NOT NULL,
    balance_after INTEGER NOT NULL,
    category TEXT NOT NULL,
    description TEXT,
    reference_type TEXT,
    reference_id TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_created (user_id, created_at DESC)
);

-- ç§¯åˆ†è®¢å•è¡¨
CREATE TABLE credit_orders (
    id TEXT PRIMARY KEY,
    order_no TEXT UNIQUE NOT NULL,
    user_id TEXT NOT NULL REFERENCES users(id),
    package_id TEXT NOT NULL REFERENCES credit_packages(id),
    package_name TEXT NOT NULL,
    price_usdt DECIMAL(10,2) NOT NULL,
    credits INTEGER NOT NULL,
    bonus_credits INTEGER DEFAULT 0,
    total_credits INTEGER NOT NULL,
    status TEXT NOT NULL DEFAULT 'pending',
    payment_method TEXT,
    payment_address TEXT,
    payment_tx_hash TEXT,
    paid_at TIMESTAMP,
    completed_at TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    remark TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_status (user_id, status),
    INDEX idx_order_no (order_no),
    INDEX idx_status_expires (status, expires_at)
);

-- æ”¯ä»˜æ–¹å¼é…ç½®è¡¨
CREATE TABLE payment_methods (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    code TEXT UNIQUE NOT NULL,
    network TEXT NOT NULL,
    currency TEXT NOT NULL,
    contract_address TEXT,
    wallet_address TEXT NOT NULL,
    confirmations INTEGER DEFAULT 20,
    min_amount DECIMAL(10,2) DEFAULT 1,
    max_amount DECIMAL(10,2) DEFAULT 10000,
    is_active BOOLEAN DEFAULT true,
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç§¯åˆ†æ¶ˆè´¹é¡¹ç›®è¡¨
CREATE TABLE credit_consumption_items (
    id TEXT PRIMARY KEY,
    code TEXT UNIQUE NOT NULL,
    name TEXT NOT NULL,
    name_en TEXT,
    description TEXT,
    category TEXT NOT NULL,
    cost_type TEXT NOT NULL,
    cost_credits INTEGER NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å…è´¹é¢åº¦é…ç½®è¡¨
CREATE TABLE free_quotas (
    id TEXT PRIMARY KEY,
    item_code TEXT NOT NULL REFERENCES credit_consumption_items(code),
    quota_type TEXT NOT NULL,
    quota_amount INTEGER NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ·å…è´¹é¢åº¦ä½¿ç”¨è®°å½•è¡¨
CREATE TABLE user_quota_usage (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL REFERENCES users(id),
    item_code TEXT NOT NULL,
    quota_type TEXT NOT NULL,
    used_amount INTEGER DEFAULT 0,
    period_start TIMESTAMP NOT NULL,
    period_end TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (user_id, item_code, period_start)
);

-- ä¼šå‘˜ç­‰çº§é…ç½®è¡¨
CREATE TABLE membership_levels (
    id TEXT PRIMARY KEY,
    code TEXT UNIQUE NOT NULL,
    name TEXT NOT NULL,
    name_en TEXT,
    min_credits INTEGER NOT NULL,
    max_credits INTEGER,
    discount_rate DECIMAL(3,2) DEFAULT 1.00,
    bonus_rate DECIMAL(3,2) DEFAULT 0.00,
    max_traders INTEGER DEFAULT 1,
    priority_level INTEGER DEFAULT 0,
    benefits TEXT,
    icon_url TEXT,
    color TEXT,
    sort_order INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ·ä¼šå‘˜ä¿¡æ¯è¡¨
CREATE TABLE user_memberships (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL UNIQUE REFERENCES users(id),
    level_code TEXT NOT NULL REFERENCES membership_levels(code),
    total_purchased INTEGER DEFAULT 0,
    total_consumed INTEGER DEFAULT 0,
    current_month_purchased INTEGER DEFAULT 0,
    current_month_consumed INTEGER DEFAULT 0,
    level_up_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## 7. APIæ¥å£è®¾è®¡

### 7.1 RESTful APIè§„èŒƒ

#### 7.1.1 å¥—é¤ç›¸å…³API

```
GET    /api/v1/packages               # è·å–æ‰€æœ‰å¥—é¤åˆ—è¡¨
GET    /api/v1/packages/{id}          # è·å–å¥—é¤è¯¦æƒ…
GET    /api/v1/packages/recommended   # è·å–æ¨èå¥—é¤

POST   /api/v1/orders                 # åˆ›å»ºç§¯åˆ†è®¢å•
GET    /api/v1/orders/{id}            # è·å–è®¢å•è¯¦æƒ…
GET    /api/v1/orders                 # è·å–ç”¨æˆ·è®¢å•åˆ—è¡¨ (åˆ†é¡µ)
POST   /api/v1/orders/{id}/cancel     # å–æ¶ˆè®¢å•
```

#### 7.1.2 ç”¨æˆ·ç§¯åˆ†API

```
GET    /api/v1/credits                # è·å–ç”¨æˆ·ç§¯åˆ†ä½™é¢
GET    /api/v1/credits/balances       # è·å–ç§¯åˆ†æ˜ç»†ï¼ˆä¸åŒæœ‰æ•ˆæœŸï¼‰
GET    /api/v1/credits/transactions   # è·å–ç§¯åˆ†æµæ°´ (åˆ†é¡µ)
GET    /api/v1/credits/expiring       # è·å–å³å°†è¿‡æœŸç§¯åˆ†
```

#### 7.1.3 ç§¯åˆ†æ¶ˆè´¹API

```
POST   /api/v1/consume                # æ¶ˆè´¹ç§¯åˆ†
GET    /api/v1/consumption/items      # è·å–æ¶ˆè´¹é¡¹ç›®åˆ—è¡¨
GET    /api/v1/quotas                 # è·å–ç”¨æˆ·å…è´¹é¢åº¦ä½¿ç”¨æƒ…å†µ
```

#### 7.1.4 ä¼šå‘˜ç­‰çº§API

```
GET    /api/v1/membership/level       # è·å–ç”¨æˆ·ä¼šå‘˜ç­‰çº§
GET    /api/v1/membership/benefits    # è·å–ä¼šå‘˜æƒç›Š
GET    /api/v1/membership/levels      # è·å–æ‰€æœ‰ä¼šå‘˜ç­‰çº§
```

### 7.2 WebSocketå®æ—¶æ¨é€

```go
// WebSocketäº‹ä»¶ç±»å‹
type WSEventType string

const (
    WS_EVENT_ORDER_PAID     WSEventType = "order_paid"      // è®¢å•æ”¯ä»˜æˆåŠŸ
    WS_EVENT_CREDITS_ADDED  WSEventType = "credits_added"   // ç§¯åˆ†åˆ°è´¦
    WS_EVENT_CREDITS_USED   WSEventType = "credits_used"    // ç§¯åˆ†æ¶ˆè´¹
    WS_EVENT_LEVEL_UP       WSEventType = "level_up"        // ä¼šå‘˜å‡çº§
    WS_EVENT_QUOTA_RESET    WSEventType = "quota_reset"     // å…è´¹é¢åº¦é‡ç½®
)

type WSEvent struct {
    Type      WSEventType `json:"type"`
    UserID    string      `json:"user_id"`
    Timestamp int64       `json:"timestamp"`
    Data      interface{} `json:"data"`
}
```

**å®æ—¶æ¨é€åœºæ™¯**:
- è®¢å•æ”¯ä»˜æˆåŠŸé€šçŸ¥
- ç§¯åˆ†åˆ°è´¦æé†’
- ä¼šå‘˜å‡çº§é€šçŸ¥
- å³å°†è¿‡æœŸç§¯åˆ†æé†’
- å…è´¹é¢åº¦ç”¨å®Œæé†’

### 7.3 APIå“åº”æ ¼å¼

```json
{
    "code": 200,
    "message": "success",
    "data": {
        // å®é™…æ•°æ®
    },
    "timestamp": 1701234567890
}
```

**é”™è¯¯ç è§„èŒƒ**:

| é”™è¯¯ç  | è¯´æ˜ | HTTPçŠ¶æ€ç  |
|--------|------|------------|
| 200 | æˆåŠŸ | 200 |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | 400 |
| 401 | æœªæˆæƒ | 401 |
| 403 | æƒé™ä¸è¶³ | 403 |
| 404 | èµ„æºä¸å­˜åœ¨ | 404 |
| 409 | ä¸šåŠ¡å†²çª | 409 |
| 422 | ç§¯åˆ†ä¸è¶³ | 422 |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | 429 |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | 500 |

### 7.4 æ¥å£é‰´æƒ

```go
// JWT Tokenè½½è·
type JWTClaims struct {
    UserID      string `json:"user_id"`
    Username    string `json:"username"`
    Membership  string `json:"membership"` // ä¼šå‘˜ç­‰çº§
    RateLimit   int    `json:"rate_limit"` // APIè°ƒç”¨é¢‘ç‡é™åˆ¶
    Exp         int64  `json:"exp"`
    Iat         int64  `json:"iat"`
}
```

**é‰´æƒç­–ç•¥**:
- æ‰€æœ‰APIéœ€è¦Bearer Tokenè®¤è¯
- ä¸åŒä¼šå‘˜ç­‰çº§æœ‰ä¸åŒçš„APIè°ƒç”¨é¢‘ç‡é™åˆ¶
- æ•æ„Ÿæ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤
- ç®¡ç†å‘˜APIéœ€è¦ç‰¹æ®Šæƒé™

---

## 8. å‰ç«¯UIè®¾è®¡

### 8.1 å¥—é¤è´­ä¹°é¡µé¢

#### 8.1.1 é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼šå‘˜ç§¯åˆ†å¥—é¤                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                         â”‚
â”‚  ğŸ’ æ¨èå¥—é¤                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚5U/200â”‚ â”‚10U/550â”‚ â”‚25U/1700â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                         â”‚
â”‚  å…¨éƒ¨å¥—é¤                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚5U/200â”‚ â”‚10U/550â”‚ â”‚25U/1700â”‚ ...      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                         â”‚
â”‚  æ”¯ä»˜æ–¹å¼: [TRC20] [ERC20] [BEP20]      â”‚
â”‚  â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  [ç«‹å³è´­ä¹°]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.1.2 äº¤äº’åŠŸèƒ½

**å¥—é¤å¡ç‰‡**:
- æ˜¾ç¤ºå¥—é¤åç§°ã€ä»·æ ¼ã€æ€»ç§¯åˆ†
- çªå‡ºæ¨èå¥—é¤
- æ˜¾ç¤ºå•ä½ç§¯åˆ†æˆæœ¬
- ç‚¹å‡»é€‰æ‹©å¥—é¤

**ä»·æ ¼å¯¹æ¯”**:
- æ˜¾ç¤ºèŠ‚çœé‡‘é¢
- å±•ç¤ºä¼˜æƒ ä¿¡æ¯
- èµ é€ç§¯åˆ†é«˜äº®

**æ”¯ä»˜æ–¹å¼é€‰æ‹©**:
- æ˜¾ç¤ºå„ç½‘ç»œæ‰‹ç»­è´¹
- åˆ°è´¦æ—¶é—´æç¤º
- æ¨èæœ€ä¼˜ç½‘ç»œ

### 8.2 æ”¯ä»˜é¡µé¢

#### 8.2.1 è®¢å•ä¿¡æ¯
```
è®¢å•å·: CR20251126220001
å¥—é¤: æ ‡å‡†å¥—é¤ (10U)
æ”¯ä»˜é‡‘é¢: 10.00 USDT
è·å¾—ç§¯åˆ†: 500 + 50 = 550
æ”¯ä»˜ç½‘ç»œ: TRON (TRC20)
è®¢å•è¿‡æœŸ: 29åˆ†45ç§’
```

#### 8.2.2 æ”¶æ¬¾ä¿¡æ¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯·å‘ä¸Šè¿°åœ°å€è½¬è´¦                â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TYjQYDZ2...AbC3              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            [ğŸ“‹ å¤åˆ¶åœ°å€]           â”‚
â”‚                                 â”‚
â”‚  æ”¯ä»˜é‡‘é¢: 10.00 USDT           â”‚
â”‚  [ğŸ“‹ å¤åˆ¶é‡‘é¢]                   â”‚
â”‚                                 â”‚
â”‚  âš ï¸ è¯·ç¡®ä¿è½¬è´¦é‡‘é¢å®Œå…¨ä¸€è‡´         â”‚
â”‚     å°‘äºæˆ–å¤šäºéƒ½å°†å¯¼è‡´è®¢å•å¤±è´¥    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.2.3 è®¢å•çŠ¶æ€
- ç­‰å¾…æ”¯ä»˜ (å€’è®¡æ—¶)
- æ”¯ä»˜ç¡®è®¤ä¸­ (æ˜¾ç¤ºç¡®è®¤æ•°)
- æ”¯ä»˜æˆåŠŸ âœ…
- è®¢å•å®Œæˆ âœ… (ç§¯åˆ†å·²åˆ°è´¦)

### 8.3 ç”¨æˆ·ç§¯åˆ†é¡µé¢

#### 8.3.1 ç§¯åˆ†æ¦‚è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆ‘çš„ç§¯åˆ†                                 â”‚
â”‚ â”€â”€â”€â”€â”€                                â”‚
â”‚                                         â”‚
â”‚  å¯ç”¨ç§¯åˆ†: 1,250                       â”‚
â”‚  å³å°†è¿‡æœŸ: 200 (30å¤©å)                â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     ç§¯åˆ†ä½¿ç”¨è¶‹åŠ¿å›¾ (è¿‘30å¤©)      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.3.2 ç§¯åˆ†æ˜ç»†
```
æŒ‰æœ‰æ•ˆæœŸåˆ†ç±»:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ°¸ä¹…ç§¯åˆ† (1,050ç§¯åˆ†)                     â”‚
â”‚ æ¥æº: æ ‡å‡†å¥—é¤ x2, é«˜çº§å¥—é¤ x1          â”‚
â”‚ æ¶ˆè´¹è®°å½•: [æŸ¥çœ‹]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2025-12-26 åˆ°æœŸ (200ç§¯åˆ†)                â”‚
â”‚ æ¥æº: é’é“œä¼šå‘˜å¥–åŠ±                       â”‚
â”‚ å‰©ä½™: 200ç§¯åˆ†                           â”‚
â”‚ [ç”³è¯·å»¶æœŸ] [ç«‹å³ä½¿ç”¨]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.3.3 ç§¯åˆ†æµæ°´
```
ç±»å‹    ç§¯åˆ†å˜åŒ–    ä½™é¢    è¯´æ˜              æ—¶é—´
è´­ä¹°    +500       1,250   æ ‡å‡†å¥—é¤         11-26
æ¶ˆè´¹    -10        1,240   AIå†³ç­–           11-26
æ¶ˆè´¹    -50        1,190   åˆ›å»ºäº¤æ˜“å‘˜       11-25
èµ é€    +50        1,240   é’é“œä¼šå‘˜å¥–åŠ±     11-25
```

### 8.4 ä¼šå‘˜ä¸­å¿ƒ

#### 8.4.1 ä¼šå‘˜ç­‰çº§å±•ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å½“å‰ç­‰çº§: é’é“œä¼šå‘˜                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚                                         â”‚
â”‚  ç´¯è®¡æ¶ˆè´¹: 550ç§¯åˆ†                      â”‚
â”‚  ä¸‹çº§ç›®æ ‡: 2,000ç§¯åˆ† (ç™½é“¶)             â”‚
â”‚                                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 27.5%                      â”‚
â”‚                                         â”‚
â”‚  æƒç›Š:                                 â”‚
â”‚  âœ… 95æŠ˜ç§¯åˆ†ä¼˜æƒ                         â”‚
â”‚  âœ… 5%è´­ä¹°èµ é€                         â”‚
â”‚  âœ… æœ€å¤§3ä¸ªäº¤æ˜“å‘˜                      â”‚
â”‚  âœ… ä¼˜å…ˆä¿¡å·æ¨é€                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.4.2 ç­‰çº§ç‰¹æƒå¯¹æ¯”è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ ç­‰çº§    â”‚å…è´¹  â”‚é’é“œ  â”‚ç™½é“¶  â”‚é»„é‡‘  â”‚é“‚é‡‘  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ æŠ˜æ‰£    â”‚-     â”‚95æŠ˜  â”‚9æŠ˜   â”‚85æŠ˜  â”‚8æŠ˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ èµ é€    â”‚-     â”‚5%    â”‚10%   â”‚15%   â”‚20%   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº¤æ˜“å‘˜  â”‚1ä¸ª   â”‚3ä¸ª   â”‚5ä¸ª   â”‚10ä¸ª  â”‚æ— é™  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ AIå†³ç­–  â”‚100/æœˆâ”‚æ— é™åˆ¶â”‚æ— é™åˆ¶â”‚æ— é™åˆ¶â”‚æ— é™åˆ¶â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼˜å…ˆä¿¡å·â”‚âŒ    â”‚âœ…    â”‚âœ…    â”‚âœ…    â”‚âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ï¿½
â”‚ APIè®¿é—® â”‚âŒ    â”‚âŒ    â”‚âœ…    â”‚âœ…    â”‚âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ï¿½
â”‚ ä¼˜å…ˆå®¢æœâ”‚âŒ    â”‚âŒ    â”‚âŒ    â”‚âœ…    â”‚âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

### 8.5 å“åº”å¼è®¾è®¡

#### 8.5.1 ç§»åŠ¨ç«¯é€‚é…
- å¥—é¤å¡ç‰‡æ”¯æŒæ»‘åŠ¨æµè§ˆ
- æ”¯ä»˜é¡µé¢ä¼˜åŒ–è§¦æ‘¸äº¤äº’
- äºŒç»´ç æ”¯ä»˜æ”¯æŒ
- ç®€åŒ–è®¢å•ä¿¡æ¯å±•ç¤º

#### 8.5.2 å›½é™…åŒ–æ”¯æŒ
- ä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢
- å¤šè¯­è¨€ä»·æ ¼æ˜¾ç¤º
- æœ¬åœ°åŒ–æ”¯ä»˜æç¤º
- åŒºåŸŸåŒ–ä¼šå‘˜æƒç›Š

---

## 9. ç®¡ç†å‘˜åå°

### 9.1 ç®¡ç†å‘˜æƒé™è®¾è®¡

```go
// è§’è‰²æƒé™å®šä¹‰
type AdminRole struct {
    ID          string   `json:"id"`
    Code        string   `json:"code"`         // role: super_admin/package_admin/order_admin
    Name        string   `json:"name"`
    Permissions []string `json:"permissions"`  // æƒé™åˆ—è¡¨
    IsActive    bool     `json:"is_active"`
}

// æƒé™åˆ—è¡¨
const (
    PERM_PACKAGE_VIEW    = "package:view"     // æŸ¥çœ‹å¥—é¤
    PERM_PACKAGE_EDIT    = "package:edit"     // ç¼–è¾‘å¥—é¤
    PERM_ORDER_VIEW      = "order:view"       // æŸ¥çœ‹è®¢å•
    PERM_ORDER_PROCESS   = "order:process"    // å¤„ç†è®¢å•
    PERM_USER_VIEW       = "user:view"        // æŸ¥çœ‹ç”¨æˆ·
    PERM_USER_ADJUST     = "user:adjust"      // è°ƒæ•´ç”¨æˆ·ç§¯åˆ†
    PERM_FINANCE_VIEW    = "finance:view"     // æŸ¥çœ‹è´¢åŠ¡æŠ¥è¡¨
    PERM_SYSTEM_CONFIG   = "system:config"    // ç³»ç»Ÿé…ç½®
)
```

### 9.2 å¥—é¤ç®¡ç†é¡µé¢

#### 9.2.1 å¥—é¤åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç§¯åˆ†å¥—é¤ç®¡ç†                                [+ æ–°å»ºå¥—é¤]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¥—é¤åç§°    â”‚ä»·æ ¼ â”‚ç§¯åˆ†â”‚èµ é€â”‚çŠ¶æ€â”‚æ¨èâ”‚æ“ä½œ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å…¥é—¨å¥—é¤    â”‚5U  â”‚200 â”‚0   â”‚âœ…å¯ç”¨â”‚âŒ â”‚[ç¼–è¾‘][ç¦ç”¨]        â”‚
â”‚ æ ‡å‡†å¥—é¤    â”‚10U â”‚500 â”‚50  â”‚âœ…å¯ç”¨â”‚âœ… â”‚[ç¼–è¾‘][ç¦ç”¨]        â”‚
â”‚ é«˜çº§å¥—é¤    â”‚25U â”‚1500â”‚200 â”‚âœ…å¯ç”¨â”‚âŒ â”‚[ç¼–è¾‘][ç¦ç”¨]        â”‚
â”‚ ä¸“ä¸šå¥—é¤    â”‚50U â”‚3500â”‚500 â”‚âŒç¦ç”¨â”‚âŒ â”‚[ç¼–è¾‘][å¯ç”¨]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.2.2 å¥—é¤åˆ›å»º/ç¼–è¾‘è¡¨å•
```
åŸºæœ¬ä¿¡æ¯:
â”œâ”€â”€ å¥—é¤åç§° (ä¸­/è‹±)
â”œâ”€â”€ å¥—é¤æè¿° (ä¸­/è‹±)
â”œâ”€â”€ ä»·æ ¼ (USDT)
â”œâ”€â”€ ç§¯åˆ†æ•°é‡
â”œâ”€â”€ èµ é€ç§¯åˆ†
â”œâ”€â”€ æœ‰æ•ˆæœŸ (å¤©)
â””â”€â”€ æœ€å¤§è´­ä¹°æ¬¡æ•°

å±•ç¤ºè®¾ç½®:
â”œâ”€â”€ æ˜¯å¦å¯ç”¨
â”œâ”€â”€ æ˜¯å¦æ¨è
â”œâ”€â”€ æ’åºæƒé‡
â””â”€â”€ å¥—é¤å›¾æ ‡

é«˜çº§è®¾ç½®:
â”œâ”€â”€ æŠ˜æ‰£ç æ”¯æŒ
â”œâ”€â”€ é™æ—¶ä¼˜æƒ 
â”œâ”€â”€ åŒºåŸŸé™åˆ¶
â””â”€â”€ ä¼šå‘˜ç­‰çº§é™åˆ¶
```

### 9.3 è®¢å•ç®¡ç†é¡µé¢

#### 9.3.1 è®¢å•åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç§¯åˆ†è®¢å•ç®¡ç†                               [å¯¼å‡º][åˆ·æ–°]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœç´¢: [è®¢å•å·][ç”¨æˆ·ID] [çŠ¶æ€:å…¨éƒ¨â–¼] [æ—¥æœŸèŒƒå›´] [æœç´¢]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚è®¢å•å·        â”‚ç”¨æˆ·   â”‚å¥—é¤    â”‚é‡‘é¢â”‚çŠ¶æ€  â”‚æ“ä½œ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚CR20251126... â”‚user123â”‚æ ‡å‡†å¥—é¤â”‚10U â”‚å·²å®Œæˆâ”‚[è¯¦æƒ…][é€€æ¬¾]   â”‚
â”‚CR20251126... â”‚user456â”‚é«˜çº§å¥—é¤â”‚25U â”‚å¾…æ”¯ä»˜â”‚[è¯¦æƒ…][å–æ¶ˆ]   â”‚
â”‚CR20251126... â”‚user789â”‚å…¥é—¨å¥—é¤â”‚5U  â”‚å¤„ç†ä¸­â”‚[è¯¦æƒ…]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.3.2 è®¢å•è¯¦æƒ…é¡µ
```
è®¢å•ä¿¡æ¯:
â”œâ”€â”€ è®¢å•å·: CR20251126220001
â”œâ”€â”€ ç”¨æˆ·: user123 (email@example.com)
â”œâ”€â”€ å¥—é¤: æ ‡å‡†å¥—é¤ (10U/500ç§¯åˆ†)
â”œâ”€â”€ æ”¯ä»˜é‡‘é¢: 10.00 USDT
â”œâ”€â”€ è·å¾—ç§¯åˆ†: 500 + 50 = 550
â”œâ”€â”€ è®¢å•çŠ¶æ€: å·²å®Œæˆ
â”œâ”€â”€ åˆ›å»ºæ—¶é—´: 2025-11-26 22:00:01
â””â”€â”€ å®Œæˆæ—¶é—´: 2025-11-26 22:03:45

æ”¯ä»˜ä¿¡æ¯:
â”œâ”€â”€ æ”¯ä»˜æ–¹å¼: TRON (TRC20)
â”œâ”€â”€ æ”¶æ¬¾åœ°å€: TYjQYDZ2...
â”œâ”€â”€ äº¤æ˜“å“ˆå¸Œ: a1b2c3d4...
â”œâ”€â”€ é“¾ä¸Šç¡®è®¤: 20/20
â””â”€â”€ åˆ°è´¦é‡‘é¢: 10.00 USDT

æ“ä½œæ—¥å¿—:
â”œâ”€â”€ 22:00:01 - è®¢å•åˆ›å»º
â”œâ”€â”€ 22:01:23 - ç”¨æˆ·å‘èµ·è½¬è´¦
â”œâ”€â”€ 22:03:12 - é“¾ä¸Šç¡®è®¤å®Œæˆ
â”œâ”€â”€ 22:03:45 - ç§¯åˆ†å‘æ”¾å®Œæˆ

å¼‚å¸¸å¤„ç†:
[é‡‘é¢ä¸è¶³æ ‡è®°å¤„ç†] [é‡å¤æ”¯ä»˜é€€æ¬¾] [è®¢å•ç”³è¯‰å¤„ç†]
```

### 9.4 ç”¨æˆ·ç®¡ç†é¡µé¢

#### 9.4.1 ç”¨æˆ·ç§¯åˆ†ç®¡ç†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ç§¯åˆ†ç®¡ç†                              [æ‰¹é‡è°ƒæ•´]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç”¨æˆ·ID    â”‚ç”¨æˆ·å  â”‚å¯ç”¨ç§¯åˆ†â”‚å†»ç»“ç§¯åˆ†â”‚æ€»æ¶ˆè´¹â”‚ä¼šå‘˜ç­‰çº§ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚user123   â”‚å¼ ä¸‰    â”‚1,250   â”‚0      â”‚550   â”‚é’é“œ     â”‚
â”‚user456   â”‚æå››    â”‚500     â”‚50     â”‚200   â”‚å…è´¹     â”‚
â”‚user789   â”‚ç‹äº”    â”‚3,400   â”‚0      â”‚3,000 â”‚ç™½é“¶     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ“ä½œ:
[è°ƒæ•´ç§¯åˆ†] [æŸ¥çœ‹æµæ°´] [å†»ç»“è´¦æˆ·] [å‘é€é€šçŸ¥]
```

#### 9.4.2 ç§¯åˆ†è°ƒæ•´åŠŸèƒ½
```
ç§¯åˆ†è°ƒæ•´è¡¨å•:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›®æ ‡ç”¨æˆ·: user123 (å¼ ä¸‰)         â”‚
â”‚ å½“å‰å¯ç”¨: 1,250ç§¯åˆ†              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è°ƒæ•´ç±»å‹:                        â”‚
â”‚ â—‹ å¢åŠ ç§¯åˆ†  â—‹ å‡å°‘ç§¯åˆ†          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è°ƒæ•´æ•°é‡: [____] ç§¯åˆ†            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœ‰æ•ˆæœŸ:                          â”‚
â”‚ â—‹ æ°¸ä¹…  â—‹ æŒ‡å®šè¿‡æœŸæ—¶é—´          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è°ƒæ•´åŸå› :                        â”‚
â”‚ [ç®¡ç†å‘˜æ‰‹åŠ¨è°ƒæ•´                  â”‚
â”‚  â–¾]                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤‡æ³¨è¯´æ˜: [________________]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å–æ¶ˆ]             [ç¡®è®¤è°ƒæ•´]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.5 æ•°æ®ç»Ÿè®¡é¡µé¢

#### 9.5.1 é”€å”®æ•°æ®çœ‹æ¿
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç§¯åˆ†é”€å”®æ•°æ®çœ‹æ¿                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                         â”‚
â”‚ ä»Šæ—¥æ•°æ®                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚æ–°å¢æ”¶å…¥â”‚ â”‚æ–°å¢ç”¨æˆ·â”‚ â”‚è®¢å•æ•° â”‚ â”‚è½¬åŒ–ç‡â”‚     â”‚
â”‚ â”‚$1,250â”‚ â”‚15    â”‚ â”‚23    â”‚ â”‚8.3% â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                         â”‚
â”‚ é”€å”®è¶‹åŠ¿å›¾ (è¿‘30å¤©)                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ çƒ­é—¨å¥—é¤æ’è¡Œ                             â”‚
â”‚ 1. æ ‡å‡†å¥—é¤ (10U) - 45%                 â”‚
â”‚ 2. é«˜çº§å¥—é¤ (25U) - 30%                 â”‚
â”‚ 3. å…¥é—¨å¥—é¤ (5U) - 25%                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.5.2 è´¢åŠ¡æŠ¥è¡¨
```
æœˆåº¦è´¢åŠ¡æŠ¥è¡¨:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2025å¹´11æœˆ                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                         â”‚
â”‚ æ”¶å…¥ç»Ÿè®¡                                â”‚
â”‚ â”œâ”€ ç§¯åˆ†é”€å”®æ”¶å…¥: $12,450                â”‚
â”‚ â”œâ”€ é€€æ¬¾æ”¯å‡º: $320                       â”‚
â”‚ â””â”€ å‡€æ”¶å…¥: $12,130                      â”‚
â”‚                                         â”‚
â”‚ ç”¨æˆ·ç»Ÿè®¡                                â”‚
â”‚ â”œâ”€ æ–°å¢ä»˜è´¹ç”¨æˆ·: 85                     â”‚
â”‚ â”œâ”€ ç´¯è®¡ä»˜è´¹ç”¨æˆ·: 420                    â”‚
â”‚ â”œâ”€ å…è´¹ç”¨æˆ·: 1,580                      â”‚
â”‚ â””â”€ è½¬åŒ–ç‡: 5.1%                         â”‚
â”‚                                         â”‚
â”‚ ç§¯åˆ†ç»Ÿè®¡                                â”‚
â”‚ â”œâ”€ å”®å‡ºç§¯åˆ†: 65,000                     â”‚
â”‚ â”œâ”€ æ¶ˆè´¹ç§¯åˆ†: 45,500                     â”‚
â”‚ â””â”€ æ¶ˆè€—ç‡: 70%                          â”‚
â”‚                                         â”‚
â”‚ [å¯¼å‡ºè´¢åŠ¡æŠ¥è¡¨] [å‘é€æœˆåº¦æŠ¥å‘Š]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.6 ç³»ç»Ÿé…ç½®é¡µé¢

#### 9.6.1 æ”¯ä»˜é…ç½®
```
æ”¯ä»˜ç½‘ç»œé…ç½®:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TRON (TRC20)                            â”‚
â”‚ â”œâ”€ æ”¶æ¬¾é’±åŒ…: TYjQYDZ2...                â”‚
â”‚ â”œâ”€ åˆçº¦åœ°å€: TR7N...                    â”‚
â”‚ â”œâ”€ ç¡®è®¤æ•°: 20                           â”‚
â”‚ â”œâ”€ æœ€å°é‡‘é¢: 1.0 USDT                   â”‚
â”‚ â”œâ”€ çŠ¶æ€: âœ…å¯ç”¨                         â”‚
â”‚ â””â”€ [ç¼–è¾‘é…ç½®]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ethereum (ERC20)                        â”‚
â”‚ â”œâ”€ æ”¶æ¬¾é’±åŒ…: 0xAbC...                   â”‚
â”‚ â”œâ”€ åˆçº¦åœ°å€: 0x94B...                   â”‚
â”‚ â”œâ”€ ç¡®è®¤æ•°: 12                           â”‚
â”‚ â”œâ”€ æœ€å°é‡‘é¢: 5.0 USDT                   â”‚
â”‚ â”œâ”€ çŠ¶æ€: âœ…å¯ç”¨                         â”‚
â”‚ â””â”€ [ç¼–è¾‘é…ç½®]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.6.2 æ¶ˆè´¹é¡¹ç›®é…ç½®
```
ç§¯åˆ†æ¶ˆè´¹é¡¹ç›®:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡¹ç›®ä»£ç      â”‚åç§°        â”‚è´¹ç”¨ â”‚çŠ¶æ€  â”‚æ“ä½œâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚trader_createâ”‚åˆ›å»ºäº¤æ˜“å‘˜  â”‚50   â”‚âœ…å¯ç”¨â”‚ç¼–è¾‘â”‚
â”‚trader_run   â”‚äº¤æ˜“å‘˜è¿è¡Œ  â”‚10/å¤©â”‚âœ…å¯ç”¨â”‚ç¼–è¾‘â”‚
â”‚ai_decision  â”‚AIå†³ç­–è°ƒç”¨  â”‚1/æ¬¡â”‚âœ…å¯ç”¨â”‚ç¼–è¾‘â”‚
â”‚signal_prem  â”‚é«˜çº§ä¿¡å·    â”‚5/å¤©â”‚âœ…å¯ç”¨â”‚ç¼–è¾‘â”‚
â”‚telegram_sig â”‚Telegramæ¨é€â”‚100/æœˆâ”‚âŒç¦ç”¨â”‚ç¼–è¾‘â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[+ æ–°å»ºæ¶ˆè´¹é¡¹ç›®]
```

---

## 10. å®‰å…¨æ€§è®¾è®¡

### 10.1 æ•°æ®å®‰å…¨

#### 10.1.1 æ•æ„Ÿæ•°æ®åŠ å¯†
```go
// æ”¯ä»˜ç›¸å…³æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨
type SecurePaymentInfo struct {
    WalletAddress string `json:"wallet_address" encrypt:"aes256"`      // é’±åŒ…åœ°å€åŠ å¯†
    TxHash        string `json:"tx_hash" encrypt:"aes256"`             // äº¤æ˜“å“ˆå¸ŒåŠ å¯†
    PrivateNote   string `json:"private_note" encrypt:"aes256"`        // ç§å¯†å¤‡æ³¨åŠ å¯†
}

// ç®¡ç†å‘˜æ“ä½œæ—¥å¿—
type AdminAuditLog struct {
    ID         string    `json:"id"`
    AdminID    string    `json:"admin_id"`
    Action     string    `json:"action"`        // æ“ä½œç±»å‹
    Resource   string    `json:"resource"`      // èµ„æºç±»å‹
    ResourceID string    `json:"resource_id"`   // èµ„æºID
    OldValue   string    `json:"old_value"`     // ä¿®æ”¹å‰å€¼
    NewValue   string    `json:"new_value"`     // ä¿®æ”¹åå€¼
    IPAddress  string    `json:"ip_address"`    // æ“ä½œIP
    UserAgent  string    `json:"user_agent"`    // ç”¨æˆ·ä»£ç†
    CreatedAt  time.Time `json:"created_at"`
}
```

#### 10.1.2 APIå®‰å…¨ç­–ç•¥

**Rate Limiting (é¢‘ç‡é™åˆ¶)**:
```go
// åŸºäºç”¨æˆ·ç­‰çº§çš„é¢‘ç‡é™åˆ¶
type RateLimitConfig struct {
    FreeUser:    100 req/hour    // å…è´¹ç”¨æˆ·
    BronzeUser:  500 req/hour    // é’é“œ
    SilverUser:  1000 req/hour   // ç™½é“¶
    GoldUser:    2000 req/hour   // é»„é‡‘
    PlatinumUser: unlimited      // é“‚é‡‘
    AdminUser:   unlimited       // ç®¡ç†å‘˜
}
```

**SQLæ³¨å…¥é˜²æŠ¤**:
- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- è¾“å…¥éªŒè¯å’Œè½¬ä¹‰
- ç™½åå•éªŒè¯
- ç¦æ­¢åŠ¨æ€SQLæ‹¼æ¥

**XSSé˜²æŠ¤**:
- è¾“å‡ºç¼–ç 
- CSP (å†…å®¹å®‰å…¨ç­–ç•¥)
- HTTP-only Cookie
- è¾“å…¥è¿‡æ»¤

### 10.2 æ”¯ä»˜å®‰å…¨

#### 10.2.1 äº¤æ˜“éªŒè¯
```go
// é“¾ä¸Šäº¤æ˜“éªŒè¯
type TransactionVerifier struct {
    Network     string  `json:"network"`       // trc20/erc20/bep20
    TxHash      string  `json:"tx_hash"`
    FromAddress string  `json:"from_address"`
    ToAddress   string  `json:"to_address"`
    Amount      float64 `json:"amount"`        // åŸå§‹é‡‘é¢
    Confirmations int   `json:"confirmations"` // å½“å‰ç¡®è®¤æ•°
    RequiredConf int    `json:"required_conf"` // éœ€è¦ç¡®è®¤æ•°
    Status      string  `json:"status"`        // pending/confirmed/failed
}

// éªŒè¯è§„åˆ™
var ValidationRules = map[string]ValidationRule{
    "trc20": {
        MinAmount:     1.0,
        RequiredConf:  20,
        TokenContract: "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
        CheckBalance:  false,
    },
    "erc20": {
        MinAmount:     5.0,
        RequiredConf:  12,
        TokenContract: "0xdAC17F958D2ee523a2206206994597C13D831ec7",
        CheckBalance:  true,
    },
}
```

#### 10.2.2 é˜²é‡æ”¾æ”»å‡»
```go
// è®¢å•é˜²é‡æ”¾
type OrderReplayProtection struct {
    OrderID    string    `json:"order_id"`
    TxHash     string    `json:"tx_hash"`      // äº¤æ˜“å“ˆå¸Œå”¯ä¸€æ ‡è¯†
    Processed  bool      `json:"processed"`    // æ˜¯å¦å·²å¤„ç†
    ProcessTime time.Time `json:"process_time"`
}

// å¹‚ç­‰æ€§ä¿è¯
type IdempotencyKey struct {
    Key         string    `json:"key"`          // å¹‚ç­‰é”®
    RequestHash string    `json:"request_hash"` // è¯·æ±‚å†…å®¹å“ˆå¸Œ
    Response    string    `json:"response"`     // å“åº”ç»“æœ
    CreatedAt   time.Time `json:"created_at"`
    ExpiresAt   time.Time `json:"expires_at"`
}
```

### 10.3 ç³»ç»Ÿå®‰å…¨

#### 10.3.1 è®¿é—®æ§åˆ¶ (RBAC)
```go
// åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
type RoleBasedAccessControl struct {
    UserRoles    map[string][]string    `json:"user_roles"`    // ç”¨æˆ·->è§’è‰²æ˜ å°„
    RolePerms    map[string][]string    `json:"role_perms"`    // è§’è‰²->æƒé™æ˜ å°„
    ResourcePerms map[string][]string   `json:"resource_perms"`// èµ„æº->æƒé™æ˜ å°„
}

// æƒé™æ£€æŸ¥ä¸­é—´ä»¶
func CheckPermission(userID, resource, action string) bool {
    roles := GetUserRoles(userID)
    requiredPerm := fmt.Sprintf("%s:%s", resource, action)
    
    for _, role := range roles {
        if HasPermission(role, requiredPerm) {
            return true
        }
    }
    return false
}
```

#### 10.3.2 æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯
```go
// äºŒæ¬¡éªŒè¯é…ç½®
type TwoFactorAuth struct {
    Methods      []string  `json:"methods"`      // sms/email/totp
    Required     []string  `json:"required"`     // å“ªäº›æ“ä½œéœ€è¦2FA
    Expiry       int       `json:"expiry"`       // éªŒè¯ç æœ‰æ•ˆæœŸ(ç§’)
    RateLimit    int       `json:"rate_limit"`   // å‘é€é¢‘ç‡é™åˆ¶
}

// æ•æ„Ÿæ“ä½œæ¸…å•
var SensitiveOperations = []string{
    "package:delete",       // åˆ é™¤å¥—é¤
    "user:adjust_credits",  // è°ƒæ•´ç”¨æˆ·ç§¯åˆ†
    "order:refund",         // è®¢å•é€€æ¬¾
    "system:config",        // ç³»ç»Ÿé…ç½®
    "admin:create",         // åˆ›å»ºç®¡ç†å‘˜
}
```

---

## 11. ç›‘æ§ä¸æ—¥å¿—

### 11.1 ä¸šåŠ¡ç›‘æ§æŒ‡æ ‡

#### 11.1.1 å…³é”®æŒ‡æ ‡ (KPIs)
```go
// ä¸šåŠ¡æŒ‡æ ‡å®šä¹‰
type BusinessMetrics struct {
    // é”€å”®æŒ‡æ ‡
    DailyRevenue        float64 `json:"daily_revenue"`        // æ—¥æ”¶å…¥
    MonthlyRevenue      float64 `json:"monthly_revenue"`      // æœˆæ”¶å…¥
    ARPU               float64 `json:"arpu"`                 // å¹³å‡æ¯ç”¨æˆ·æ”¶å…¥
    ConversionRate     float64 `json:"conversion_rate"`      // è½¬åŒ–ç‡
    CustomerLTV        float64 `json:"customer_ltv"`         // å®¢æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼
    
    // ç”¨æˆ·æŒ‡æ ‡
    NewUsers           int     `json:"new_users"`            // æ–°å¢ç”¨æˆ·
    ActiveUsers        int     `json:"active_users"`         // æ´»è·ƒç”¨æˆ·
    PaidUsers          int     `json:"paid_users"`           // ä»˜è´¹ç”¨æˆ·
    ChurnRate          float64 `json:"churn_rate"`           // ç”¨æˆ·æµå¤±ç‡
    
    // ç§¯åˆ†æŒ‡æ ‡
    CreditsSold        int     `json:"credits_sold"`         // å”®å‡ºç§¯åˆ†
    CreditsConsumed    int     `json:"credits_consumed"`     // æ¶ˆè´¹ç§¯åˆ†
    CreditsExpired     int     `json:"credits_expired"`      // è¿‡æœŸç§¯åˆ†
    ConsumptionRate    float64 `json:"consumption_rate"`     // ç§¯åˆ†æ¶ˆè€—ç‡
    
    // è®¢å•æŒ‡æ ‡
    OrderCount         int     `json:"order_count"`          // è®¢å•æ•°é‡
    OrderSuccessRate   float64 `json:"order_success_rate"`   // è®¢å•æˆåŠŸç‡
    AverageOrderValue  float64 `json:"average_order_value"`  // å¹³å‡è®¢å•ä»·å€¼
    RefundRate         float64 `json:"refund_rate"`          // é€€æ¬¾ç‡
}
```

#### 11.1.2 å®æ—¶ç›‘æ§çœ‹æ¿
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®æ—¶ä¸šåŠ¡ç›‘æ§çœ‹æ¿                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                         â”‚
â”‚ å½“å‰åœ¨çº¿: 125 ç”¨æˆ·                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚æ–°è®¢å•â”‚ â”‚å¾…å¤„ç†â”‚ â”‚æˆåŠŸç‡â”‚ â”‚æ”¶å…¥ â”‚         â”‚
â”‚ â”‚  5  â”‚ â”‚  3  â”‚ â”‚98.5%â”‚ â”‚$450â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                         â”‚
â”‚ æ”¯ä»˜æˆåŠŸç‡è¶‹åŠ¿ (5åˆ†é’Ÿ)                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ             â”‚ â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ å¼‚å¸¸å‘Šè­¦                                â”‚
â”‚ âœ… æ— å¼‚å¸¸                               â”‚
â”‚                                         â”‚
â”‚ ç³»ç»ŸçŠ¶æ€                                â”‚
â”‚ âœ… æ•°æ®åº“: æ­£å¸¸                         â”‚
â”‚ âœ… æ”¯ä»˜æœåŠ¡: æ­£å¸¸                       â”‚
â”‚ âš ï¸  TRC20ç¡®è®¤å»¶è¿Ÿ (å½“å‰12/20)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 æ—¥å¿—è®¾è®¡

#### 11.2.1 ç»“æ„åŒ–æ—¥å¿—æ ¼å¼
```go
// ç»“æ„åŒ–æ—¥å¿—æ ¼å¼
type CreditSystemLog struct {
    Timestamp   time.Time `json:"timestamp"`
    Level       string    `json:"level"`          // info/warn/error
    TraceID     string    `json:"trace_id"`       // è¿½è¸ªID
    UserID      string    `json:"user_id"`        // ç”¨æˆ·ID
    Action      string    `json:"action"`         // æ“ä½œç±»å‹
    Resource    string    `json:"resource"`       // èµ„æºç±»å‹
    ResourceID  string    `json:"resource_id"`    // èµ„æºID
    RequestIP   string    `json:"request_ip"`     // è¯·æ±‚IP
    UserAgent   string    `json:"user_agent"`     // ç”¨æˆ·ä»£ç†
    Duration    int64     `json:"duration_ms"`    // è€—æ—¶(æ¯«ç§’)
    Status      string    `json:"status"`         // æˆåŠŸ/å¤±è´¥
    ErrorCode   string    `json:"error_code"`     // é”™è¯¯ç 
    Message     string    `json:"message"`        // æ—¥å¿—æ¶ˆæ¯
    Metadata    string    `json:"metadata"`       // é¢å¤–ä¿¡æ¯ (JSON)
}
```

**ç¤ºä¾‹æ—¥å¿—**:
```json
{
    "timestamp": "2025-11-26T22:00:01Z",
    "level": "info",
    "trace_id": "tr_abc123def456",
    "user_id": "user123",
    "action": "create_order",
    "resource": "credit_order",
    "resource_id": "CR20251126220001",
    "request_ip": "192.168.1.100",
    "user_agent": "Mozilla/5.0...",
    "duration_ms": 150,
    "status": "success",
    "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
    "metadata": {
        "package_id": "pkg_standard",
        "amount": 10.0,
        "credits": 550
    }
}
```

#### 11.2.2 åˆ†ç±»æ—¥å¿—

**ç”¨æˆ·è¡Œä¸ºæ—¥å¿—**:
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- å¥—é¤æµè§ˆ/è´­ä¹°
- ç§¯åˆ†æ¶ˆè´¹/æŸ¥è¯¢
- ä¼šå‘˜ç­‰çº§å˜åŠ¨

**ç³»ç»Ÿæ“ä½œæ—¥å¿—**:
- ç®¡ç†å‘˜æ“ä½œè®°å½•
- é…ç½®å˜æ›´æ—¥å¿—
- æ•°æ®ä¿®æ”¹è¿½è¸ª
- æƒé™å˜æ›´è®°å½•

**ä¸šåŠ¡äº‹ä»¶æ—¥å¿—**:
- è®¢å•åˆ›å»º/æ”¯ä»˜
- ç§¯åˆ†å‘æ”¾/æ¶ˆè´¹
- é€€æ¬¾å¤„ç†
- å¼‚å¸¸è®¢å•å¤„ç†

**é”™è¯¯æ—¥å¿—**:
- APIè°ƒç”¨å¤±è´¥
- æ”¯ä»˜ç¡®è®¤å¤±è´¥
- æ•°æ®åº“å¼‚å¸¸
- å¤–éƒ¨æœåŠ¡é”™è¯¯

### 11.3 å‘Šè­¦æœºåˆ¶

#### 11.3.1 å‘Šè­¦è§„åˆ™é…ç½®
```go
// å‘Šè­¦è§„åˆ™
type AlertRule struct {
    ID          string            `json:"id"`
    Name        string            `json:"name"`
    Metric      string            `json:"metric"`           // ç›‘æ§æŒ‡æ ‡
    Condition   string            `json:"condition"`        // è§¦å‘æ¡ä»¶: >/</>=/<=/==
    Threshold   float64           `json:"threshold"`        // é˜ˆå€¼
    Duration    int               `json:"duration"`         // æŒç»­æ—¶é—´(ç§’)
    Severity    string            `json:"severity"`         // ä¸¥é‡çº§åˆ«: critical/major/minor
    Channels    []string          `json:"channels"`         // é€šçŸ¥æ¸ é“: email/sms/telegram/webhook
    Recipients  []string          `json:"recipients"`       // æ¥æ”¶äºº
    Enabled     bool              `json:"enabled"`
    CreatedAt   time.Time         `json:"created_at"`
}

// é¢„å®šä¹‰å‘Šè­¦è§„åˆ™
var DefaultAlertRules = []AlertRule{
    {
        Name:        "æ”¯ä»˜æˆåŠŸç‡è¿‡ä½",
        Metric:      "payment_success_rate",
        Condition:   "<",
        Threshold:   95.0,
        Duration:    300,        // 5åˆ†é’Ÿ
        Severity:    "major",
        Channels:    []string{"email", "telegram"},
        Recipients:  []string{"ops@company.com", "@devops"},
    },
    {
        Name:        "è®¢å•å¤„ç†å»¶è¿Ÿ",
        Metric:      "order_processing_time",
        Condition:   ">",
        Threshold:   300,        // 5åˆ†é’Ÿ
        Duration:    60,
        Severity:    "minor",
        Channels:    []string{"webhook"},
        Recipients:  []string{"https://hooks.slack.com/..."},
    },
    {
        Name:        "æ•°æ®åº“è¿æ¥å¼‚å¸¸",
        Metric:      "db_connection_errors",
        Condition:   ">",
        Threshold:   5,
        Duration:    0,          // ç«‹å³å‘Šè­¦
        Severity:    "critical",
        Channels:    []string{"sms", "email"},
        Recipients:  []string{"+1234567890", "dba@company.com"},
    },
}
```

#### 11.3.2 å‘Šè­¦é€šçŸ¥æ¨¡æ¿
```go
// å‘Šè­¦é€šçŸ¥æ¨¡æ¿
type AlertNotification struct {
    RuleName     string    `json:"rule_name"`
    Severity     string    `json:"severity"`
    Metric       string    `json:"metric"`
    CurrentValue float64   `json:"current_value"`
    Threshold    float64   `json:"threshold"`
    Duration     string    `json:"duration"`
    Status       string    `json:"status"`        // triggered/resolved
    Timestamp    time.Time `json:"timestamp"`
    Description  string    `json:"description"`
    ActionURL    string    `json:"action_url"`    // å¿«é€Ÿæ“ä½œé“¾æ¥
}
```

---

## 12. æ€§èƒ½ä¼˜åŒ–

### 12.1 æ•°æ®åº“ä¼˜åŒ–

#### 12.1.1 ç´¢å¼•ç­–ç•¥
```sql
-- è®¢å•è¡¨ç´¢å¼•
CREATE INDEX idx_credit_orders_user_status ON credit_orders(user_id, status);
CREATE INDEX idx_credit_orders_created ON credit_orders(created_at DESC);
CREATE INDEX idx_credit_orders_status_expires ON credit_orders(status, expires_at);
CREATE INDEX idx_credit_orders_payment_hash ON credit_orders(payment_tx_hash);

-- ç§¯åˆ†æµæ°´è¡¨ç´¢å¼•
CREATE INDEX idx_credit_transactions_user_created ON credit_transactions(user_id, created_at DESC);
CREATE INDEX idx_credit_transactions_type_created ON credit_transactions(type, created_at DESC);
CREATE INDEX idx_credit_transactions_category ON credit_transactions(category);

-- ç§¯åˆ†ä½™é¢è¡¨ç´¢å¼•
CREATE INDEX idx_credit_balances_user_expires ON credit_balances(user_id, expires_at);
CREATE INDEX idx_credit_balances_source ON credit_balances(source_type, source_id);

-- ç”¨æˆ·ä¼šå‘˜è¡¨ç´¢å¼•
CREATE INDEX idx_user_memberships_level ON user_memberships(level_code);
CREATE INDEX idx_user_memberships_total_purchased ON user_memberships(total_purchased);

-- å¤åˆç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX idx_orders_user_status_created ON credit_orders(user_id, status, created_at DESC);
CREATE INDEX idx_transactions_user_type_created ON credit_transactions(user_id, type, created_at DESC);
```

#### 12.1.2 æŸ¥è¯¢ä¼˜åŒ–
```go
// ä¼˜åŒ–çš„ç§¯åˆ†æŸ¥è¯¢
type OptimizedCreditQuery struct {
    // ä½¿ç”¨é¢„èšåˆæŸ¥è¯¢
    GetUserCreditSummary(userID string) (*CreditSummary, error)
    
    // æ‰¹é‡æŸ¥è¯¢å‡å°‘N+1
    GetBatchUserCredits(userIDs []string) (map[string]*UserCredits, error)
    
    // åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
    GetCreditTransactions(userID string, page, limit int) ([]*CreditTransaction, error)
    
    // ç¼“å­˜çƒ­é—¨æ•°æ®
    GetPopularPackages() ([]*CreditPackage, error)
    
    // åªæŸ¥è¯¢å¿…è¦å­—æ®µ
    GetMinimalOrderInfo(orderID string) (*OrderMinimal, error)
}

// åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
func GetCreditTransactionsOptimized(userID string, cursor string, limit int) ([]*CreditTransaction, string, error) {
    // ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µä»£æ›¿OFFSET
    var queries []string
    
    queries = append(queries, `
        SELECT id, type, amount, balance_after, category, description, created_at
        FROM credit_transactions 
        WHERE user_id = ? 
    `)
    
    if cursor != "" {
        queries = append(queries, fmt.Sprintf(" AND created_at < '%s'", cursor))
    }
    
    queries = append(queries, fmt.Sprintf(" ORDER BY created_at DESC LIMIT %d", limit))
    
    // æ‰§è¡ŒæŸ¥è¯¢...
}
```

### 12.2 ç¼“å­˜ç­–ç•¥

#### 12.2.1 å¤šçº§ç¼“å­˜æ¶æ„
```go
// ç¼“å­˜å±‚çº§
type CacheStrategy struct {
    L1Cache *sync.Map              // å†…å­˜ç¼“å­˜ (çƒ­ç‚¹æ•°æ®)
    L2Cache *redis.Client          // Redisç¼“å­˜ (ç”¨æˆ·æ•°æ®)
    L3Cache *sql.DB               // æ•°æ®åº“ (æŒä¹…åŒ–)
    
    // ç¼“å­˜é”®å‰ç¼€
    Prefix map[string]string{
        "package":  "pkg",         // å¥—é¤ç¼“å­˜
        "user":     "usr",         // ç”¨æˆ·ç¼“å­˜
        "order":    "ord",         // è®¢å•ç¼“å­˜
        "credits":  "crd",         // ç§¯åˆ†ç¼“å­˜
    }
}

// ç¼“å­˜é…ç½®
type CacheConfig struct {
    // L1ç¼“å­˜é…ç½®
    L1MaxEntries  int           // æœ€å¤§æ¡ç›®æ•°
    L1TTL         time.Duration // è¿‡æœŸæ—¶é—´
    
    // L2ç¼“å­˜é…ç½®
    L2RedisAddr   string
    L2Password    string
    L2DB          int
    L2TTL         time.Duration
    L2MaxRetries  int
    
    // é¢„çƒ­é…ç½®
    WarmUpEnabled bool          // å¯ç”¨é¢„çƒ­
    WarmUpItems   []string      // é¢„çƒ­é¡¹ç›®
}
```

#### 12.2.2 ç¼“å­˜æ›´æ–°ç­–ç•¥

**Write-Through (ç›´å†™)**:
```go
// å†™å…¥å¥—é¤åç«‹å³æ›´æ–°ç¼“å­˜
func UpdatePackageCache(pkg *CreditPackage) error {
    // 1. æ›´æ–°æ•°æ®åº“
    if err := db.UpdatePackage(pkg); err != nil {
        return err
    }
    
    // 2. æ›´æ–°ç¼“å­˜
    cacheKey := fmt.Sprintf("pkg:%s", pkg.ID)
    if err := redis.Set(cacheKey, pkg, time.Hour); err != nil {
        return err
    }
    
    // 3. æ›´æ–°å¥—é¤åˆ—è¡¨ç¼“å­˜
    packages, _ := GetAllPackages()
    redis.Set("packages:list", packages, time.Minute*30)
    
    return nil
}
```

**Write-Behind (å›å†™)**:
```go
// ç”¨æˆ·ç§¯åˆ†å¼‚æ­¥æ›´æ–°
func DeductCreditsAsync(userID string, amount int) {
    // 1. ç«‹å³æ›´æ–°å†…å­˜ç¼“å­˜ (æå‡å“åº”é€Ÿåº¦)
    UpdateL1Cache(userID, amount)
    
    // 2. å†™å…¥é˜Ÿåˆ—å¼‚æ­¥å¤„ç†
    creditQueue.Push(CreditTask{
        Type:     "deduct",
        UserID:   userID,
        Amount:   amount,
        Priority: "high",
    })
    
    // 3. åå°workerå¼‚æ­¥å†™å…¥æ•°æ®åº“
    go func() {
        time.Sleep(100 * time.Millisecond) // æ‰¹é‡å†™å…¥
        processCreditQueue()
    }()
}
```

#### 12.2.3 ç¼“å­˜é¢„çƒ­
```go
// ç³»ç»Ÿå¯åŠ¨æ—¶é¢„çƒ­ç¼“å­˜
func WarmUpCache() {
    var wg sync.WaitGroup
    
    // é¢„çƒ­å¥—é¤æ•°æ®
    wg.Add(1)
    go func() {
        defer wg.Done()
        packages, _ := GetAllPackages()
        for _, pkg := range packages {
            cacheKey := fmt.Sprintf("pkg:%s", pkg.ID)
            redis.Set(cacheKey, pkg, time.Hour)
        }
        redis.Set("packages:list", packages, time.Minute*30)
    }()
    
    // é¢„çƒ­çƒ­é—¨ç”¨æˆ·æ•°æ®
    wg.Add(1)
    go func() {
        defer wg.Done()
        topUsers, _ := GetTopUsers(100)
        for _, userID := range topUsers {
            credits, _ := GetUserCredits(userID)
            cacheKey := fmt.Sprintf("usr:%s:credits", userID)
            redis.Set(cacheKey, credits, time.Minute*10)
        }
    }()
    
    // é¢„çƒ­æ”¯ä»˜é…ç½®
    wg.Add(1)
    go func() {
        defer wg.Done()
        methods, _ := GetPaymentMethods()
        redis.Set("payment:methods", methods, time.Hour)
    }()
    
    wg.Wait()
}
```

### 12.3 å¹¶å‘å¤„ç†

#### 12.3.1 æ”¯ä»˜ç¡®è®¤å¹¶å‘ä¼˜åŒ–
```go
// å¹¶å‘ç¡®è®¤å¤šä¸ªäº¤æ˜“
func ConfirmTransactionsConcurrently(txHashes []string) {
    sem := make(chan struct{}, 10) // é™åˆ¶å¹¶å‘æ•°ä¸º10
    
    var wg sync.WaitGroup
    for _, hash := range txHashes {
        wg.Add(1)
        go func(txHash string) {
            sem <- struct{}{}
            defer func() {
                <-sem
                wg.Done()
            }()
            
            // ç¡®è®¤äº¤æ˜“
            if err := ConfirmSingleTransaction(txHash); err != nil {
                log.Error("ç¡®è®¤äº¤æ˜“å¤±è´¥", "hash", txHash, "error", err)
            }
        }(hash)
    }
    
    wg.Wait()
}

// ä½¿ç”¨channelå®ç°ç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å¼
func ProcessPaymentQueue() {
    // ç”Ÿäº§è€…: ç›‘å¬é“¾ä¸Šäº¤æ˜“
    go func() {
        for {
            tx, ok := <-paymentCh
            if !ok {
                return
            }
            orderQueue <- tx
        }
    }()
    
    // æ¶ˆè´¹è€…: å¤„ç†äº¤æ˜“
    for i := 0; i < 5; i++ { // 5ä¸ªworker
        go func() {
            for tx := range orderQueue {
                processPayment(tx)
            }
        }()
    }
}
```

#### 12.3.2 ä¹è§‚é”é˜²å¹¶å‘é—®é¢˜
```go
// ç§¯åˆ†æ‰£å‡ä½¿ç”¨ä¹è§‚é”
func DeductCreditsWithOptimisticLock(userID string, amount int, version int) error {
    return db.Transaction(func(tx *sql.DB) error {
        // 1. æŸ¥è¯¢å½“å‰ç‰ˆæœ¬
        var currentVersion int
        err := tx.QueryRow(`
            SELECT version 
            FROM user_credits 
            WHERE user_id = ? FOR UPDATE
        `, userID).Scan(&currentVersion)
        
        if err != nil {
            return err
        }
        
        // 2. æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
        if currentVersion != version {
            return errors.New("concurrent_modification")
        }
        
        // 3. æ‰£å‡ç§¯åˆ†å¹¶æ›´æ–°ç‰ˆæœ¬
        _, err = tx.Exec(`
            UPDATE user_credits 
            SET available_credits = available_credits - ?,
                used_credits = used_credits + ?,
                version = version + 1,
                updated_at = CURRENT_TIMESTAMP
            WHERE user_id = ?
        `, amount, amount, userID)
        
        return err
    })
}
```

---

## 13. å›½é™…åŒ–æ”¯æŒ

### 13.1 å¤šè¯­è¨€æ¶æ„

#### 13.1.1 å›½é™…åŒ–é…ç½®
```go
// æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
type SupportedLanguage struct {
    Code       string `json:"code"`        // zh-CN/en-US/ru-RU/uk-UA
    Name       string `json:"name"`        // ä¸­æ–‡/English/Ğ ÑƒÑÑĞºĞ¸Ğ¹/Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    NativeName string `json:"native_name"` // ä¸­æ–‡/English/Ğ ÑƒÑÑĞºĞ¸Ğ¹/Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°
    Flag       string `json:"flag"`        // ğŸ‡¨ğŸ‡³/ğŸ‡ºğŸ‡¸/ğŸ‡·ğŸ‡º/ğŸ‡ºğŸ‡¦
    RTL        bool   `json:"rtl"`         // æ˜¯å¦ä»å³åˆ°å·¦
    Active     bool   `json:"active"`      // æ˜¯å¦å¯ç”¨
    SortOrder  int    `json:"sort_order"`  // æ’åº
}

var SupportedLanguages = []SupportedLanguage{
    {Code: "zh-CN", Name: "ä¸­æ–‡", NativeName: "ä¸­æ–‡", Flag: "ğŸ‡¨ğŸ‡³", RTL: false, Active: true, SortOrder: 1},
    {Code: "en-US", Name: "English", NativeName: "English", Flag: "ğŸ‡ºğŸ‡¸", RTL: false, Active: true, SortOrder: 2},
    {Code: "ru-RU", Name: "Russian", NativeName: "Ğ ÑƒÑÑĞºĞ¸Ğ¹", Flag: "ğŸ‡·ğŸ‡º", RTL: false, Active: true, SortOrder: 3},
    {Code: "uk-UA", Name: "Ukrainian", NativeName: "Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°", Flag: "ğŸ‡ºğŸ‡¦", RTL: false, Active: true, SortOrder: 4},
}

// ç¿»è¯‘é”®å€¼å¯¹ç»“æ„
type TranslationMap map[string]map[string]string // key -> lang_code -> translation
```

#### 13.1.2 å¥—é¤å¤šè¯­è¨€é…ç½®
```go
// å¥—é¤å¤šè¯­è¨€ç»“æ„
type CreditPackageI18n struct {
    ID              string            `json:"id"`
    Name            map[string]string `json:"name"`            // å¤šè¯­è¨€åç§°
    Description     map[string]string `json:"description"`     // å¤šè¯­è¨€æè¿°
    ShortName       map[string]string `json:"short_name"`      // çŸ­åç§°
    Features        map[string][]string `json:"features"`      // ç‰¹æ€§åˆ—è¡¨
    BadgeText       map[string]string `json:"badge_text"`      // æ ‡ç­¾æ–‡æœ¬
    PaymentHint     map[string]string `json:"payment_hint"`    // æ”¯ä»˜æç¤º
}

// å¥—é¤ç¿»è¯‘ç¤ºä¾‹
var PackageTranslations = map[string]CreditPackageI18n{
    "starter": {
        Name: map[string]string{
            "zh-CN": "å…¥é—¨å¥—é¤",
            "en-US": "Starter Pack",
            "ru-RU": "Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚",
            "uk-UA": "Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚",
        },
        Description: map[string]string{
            "zh-CN": "é€‚åˆæ–°ç”¨æˆ·çš„å…¥é—¨å¥—é¤ï¼Œä½“éªŒAIäº¤æ˜“åŠŸèƒ½",
            "en-US": "Entry package for new users to experience AI trading",
            "ru-RU": "Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹",
            "uk-UA": "Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ… ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²",
        },
        BadgeText: map[string]string{
            "zh-CN": "ğŸ”¥ æœ€è¶…å€¼",
            "en-US": "ğŸ”¥ Best Value",
            "ru-RU": "ğŸ”¥ Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ñ†ĞµĞ½Ğ°",
            "uk-UA": "ğŸ”¥ ĞĞ°Ğ¹ĞºÑ€Ğ°Ñ‰Ğ° Ñ†Ñ–Ğ½Ğ°",
        },
    },
}
```

### 13.2 æœ¬åœ°åŒ–é€‚é…

#### 13.2.1 è´§å¸å’Œä»·æ ¼æ˜¾ç¤º
```go
// æœ¬åœ°åŒ–æ•°å­—å’Œè´§å¸
type LocalizedPrice struct {
    Amount      float64 `json:"amount"`
    Currency    string  `json:"currency"`    // USDT
    Symbol      string  `json:"symbol"`      // $
    Formatted   string  `json:"formatted"`   // $10.00
    Locale      string  `json:"locale"`      // en-US
    Fraction    int     `json:"fraction"`    // å°æ•°ä½æ•°
}

func FormatPrice(amount float64, currency, locale string) LocalizedPrice {
    // ä¸åŒåœ°åŒºçš„ä»·æ ¼æ˜¾ç¤ºæ ¼å¼
    localeFormats := map[string]struct {
        Symbol   string
        Fraction int
        Format   string // æ ¼å¼æ¨¡æ¿
    }{
        "en-US": {"$", 2, "$%.2f"},
        "ru-RU": {"â‚½", 2, "%.2f â‚½"},
        "uk-UA": {"â‚´", 2, "%.2f â‚´"},
        "zh-CN": {"Â¥", 2, "Â¥%.2f"},
    }
    
    format, ok := localeFormats[locale]
    if !ok {
        format = localeFormats["en-US"]
    }
    
    return LocalizedPrice{
        Amount:    amount,
        Currency:  currency,
        Symbol:    format.Symbol,
        Formatted: fmt.Sprintf(format.Format, amount),
        Locale:    locale,
        Fraction:  format.Fraction,
    }
}
```

#### 13.2.2 æ”¯ä»˜æ–¹å¼æœ¬åœ°åŒ–
```go
// æ”¯ä»˜æ–¹å¼æœ¬åœ°åŒ–æ˜¾ç¤º
type PaymentMethodI18n struct {
    Code        string            `json:"code"`
    Name        map[string]string `json:"name"`
    NetworkName map[string]string `json:"network_name"`
    Description map[string]string `json:"description"`
    Tips        map[string]string `json:"tips"`            // æ”¯ä»˜æç¤º
    MinNotice   map[string]string `json:"min_notice"`      // æœ€å°é‡‘é¢æç¤º
}

var PaymentMethodTranslations = map[string]PaymentMethodI18n{
    "usdt_trc20": {
        Name: map[string]string{
            "zh-CN": "USDT (TRONç½‘ç»œ)",
            "en-US": "USDT (TRON)",
            "ru-RU": "USDT (TRON)",
            "uk-UA": "USDT (TRON)",
        },
        Tips: map[string]string{
            "zh-CN": "æ¨èä½¿ç”¨ï¼Œæ‰‹ç»­è´¹ä½ï¼Œåˆ°è´¦å¿«",
            "en-US": "Recommended, low fees, fast confirmation",
            "ru-RU": "Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ, Ğ½Ğ¸Ğ·ĞºĞ¸Ğµ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸, Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ",
            "uk-UA": "Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ”Ñ‚ÑŒÑÑ, Ğ½Ğ¸Ğ·ÑŒĞºÑ– ĞºĞ¾Ğ¼Ñ–ÑÑ–Ñ—, ÑˆĞ²Ğ¸Ğ´ĞºĞµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ",
        },
        MinNotice: map[string]string{
            "zh-CN": "æœ€å°è½¬è´¦é‡‘é¢: 1 USDT",
            "en-US": "Min transfer: 1 USDT",
            "ru-RU": "ĞœĞ¸Ğ½. Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´: 1 USDT",
            "uk-UA": "ĞœÑ–Ğ½. Ğ¿ĞµÑ€ĞµĞºĞ°Ğ·: 1 USDT",
        },
    },
}
```

### 13.3 é‚®ä»¶å’Œé€šçŸ¥æœ¬åœ°åŒ–

#### 13.3.1 é‚®ä»¶æ¨¡æ¿å¤šè¯­è¨€
```go
// é‚®ä»¶æ¨¡æ¿ç»“æ„
type EmailTemplate struct {
    Subject     map[string]string `json:"subject"`      // ä¸»é¢˜
    Content     map[string]string `json:"content"`      // HTMLå†…å®¹
    PlainText   map[string]string `json:"plain_text"`   // çº¯æ–‡æœ¬
    Variables   []string          `json:"variables"`    // æ¨¡æ¿å˜é‡
}

// æ”¯ä»˜æˆåŠŸé‚®ä»¶æ¨¡æ¿
var PaymentSuccessEmail = EmailTemplate{
    Subject: map[string]string{
        "zh-CN": "ğŸ‰ ç§¯åˆ†åˆ°è´¦é€šçŸ¥ - æ‚¨çš„{package_name}å·²æ¿€æ´»",
        "en-US": "ğŸ‰ Credits Added - Your {package_name} is ready",
        "ru-RU": "ğŸ‰ ĞĞ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² - {package_name} Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½",
        "uk-UA": "ğŸ‰ ĞĞ°Ñ€Ğ°Ñ…ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ±Ğ°Ğ»Ñ–Ğ² - {package_name} Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¾",
    },
    Content: map[string]string{
        "zh-CN": `
            <h2>æ”¯ä»˜æˆåŠŸï¼</h2>
            <p>å°Šæ•¬çš„å®¢æˆ·ï¼Œæ‚¨è´­ä¹°çš„<strong>{package_name}</strong>å·²æ¿€æ´»æˆåŠŸã€‚</p>
            <ul>
                <li>è®¢å•å·: {order_no}</li>
                <li>è´­ä¹°ç§¯åˆ†: {credits}</li>
                <li>èµ é€ç§¯åˆ†: {bonus}</li>
                <li>æ”¯ä»˜é‡‘é¢: {amount} {currency}</li>
            </ul>
            <p>æ„Ÿè°¢æ‚¨çš„è´­ä¹°ï¼Œç¥æ‚¨äº¤æ˜“æ„‰å¿«ï¼</p>
        `,
        "en-US": `
            <h2>Payment Successful!</h2>
            <p>Dear customer, your <strong>{package_name}</strong> has been activated successfully.</p>
            <ul>
                <li>Order No: {order_no}</li>
                <li>Purchased Credits: {credits}</li>
                <li>Bonus Credits: {bonus}</li>
                <li>Amount Paid: {amount} {currency}</li>
            </ul>
            <p>Thank you for your purchase. Happy trading!</p>
        `,
    },
}
```

#### 13.3.2 é€šçŸ¥æ¨é€æœ¬åœ°åŒ–
```go
// é€šçŸ¥æ¶ˆæ¯ç»“æ„
type NotificationMessage struct {
    Type        string            `json:"type"`        // payment/order/level_up
    Priority    string            `json:"priority"`    // high/normal/low
    Title       map[string]string `json:"title"`
    Message     map[string]string `json:"message"`
    ActionText  map[string]string `json:"action_text"`
    ActionURL   string            `json:"action_url"`
    Channels    []string          `json:"channels"`    // email/sms/telegram/webpush
}

// ä¼šå‘˜å‡çº§é€šçŸ¥
var LevelUpNotification = NotificationMessage{
    Type:     "level_up",
    Priority: "high",
    Title: map[string]string{
        "zh-CN": "ğŸŠ æ­å–œå‡çº§ï¼",
        "en-US": "ğŸŠ Congratulations!",
        "ru-RU": "ğŸŠ ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼!",
        "uk-UA": "ğŸŠ Ğ’Ñ–Ñ‚Ğ°Ñ”Ğ¼Ğ¾!",
    },
    Message: map[string]string{
        "zh-CN": "æ‚¨å·²å‡çº§ä¸º{new_level}ä¼šå‘˜ï¼Œäº«å—æ›´å¤šæƒç›Šï¼",
        "en-US": "You have been upgraded to {new_level} membership with more benefits!",
        "ru-RU": "Ğ’Ñ‹ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ñ‹ Ğ´Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ {new_level} Ñ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ¸Ğ»ĞµĞ³Ğ¸ÑĞ¼Ğ¸!",
        "uk-UA": "Ğ’Ğ°Ñ Ğ¿Ñ–Ğ´Ğ²Ğ¸Ñ‰ĞµĞ½Ğ¾ Ğ´Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ {new_level} Ğ· Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ¸Ğ¼Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ñ–Ğ»ĞµÑĞ¼Ğ¸!",
    },
    ActionText: map[string]string{
        "zh-CN": "æŸ¥çœ‹æƒç›Š",
        "en-US": "View Benefits",
        "ru-RU": "ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¿Ñ€Ğ¸Ğ²Ğ¸Ğ»ĞµĞ³Ğ¸Ğ¹",
        "uk-UA": "ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ñ–Ğ»ĞµÑ—",
    },
    Channels: []string{"email", "webpush", "telegram"},
}
```

---

## 14. æµ‹è¯•ç­–ç•¥

### 14.1 å•å…ƒæµ‹è¯•

#### 14.1.1 ç§¯åˆ†æœåŠ¡æµ‹è¯•
```go
// ç§¯åˆ†æœåŠ¡å•å…ƒæµ‹è¯•
func TestCreditService(t *testing.T) {
    setupTestDB()
    defer cleanupTestDB()
    
    service := NewCreditService(db, redis)
    userID := "test_user_001"
    
    // æµ‹è¯•: æ·»åŠ ç§¯åˆ†
    t.Run("AddCredits", func(t *testing.T) {
        err := service.AddCredits(userID, 500, "purchase", "pkg_001", nil)
        assert.NoError(t, err)
        
        credits, err := service.GetUserCredits(userID)
        assert.NoError(t, err)
        assert.Equal(t, 500, credits.AvailableCredits)
    })
    
    // æµ‹è¯•: æ‰£å‡ç§¯åˆ†
    t.Run("DeductCredits", func(t *testing.T) {
        err := service.DeductCredits(userID, 50, "trader_create", "åˆ›å»ºäº¤æ˜“å‘˜", "feature", "trader_001")
        assert.NoError(t, err)
        
        credits, err := service.GetUserCredits(userID)
        assert.NoError(t, err)
        assert.Equal(t, 450, credits.AvailableCredits)
        assert.Equal(t, 50, credits.UsedCredits)
    })
    
    // æµ‹è¯•: ç§¯åˆ†ä¸è¶³
    t.Run("InsufficientCredits", func(t *testing.T) {
        err := service.DeductCredits(userID, 1000, "api_access", "APIè®¿é—®", "feature", "api_001")
        assert.Error(t, err)
        assert.Contains(t, err.Error(), "insufficient_credits")
    })
    
    // æµ‹è¯•: å†»ç»“/è§£å†»ç§¯åˆ†
    t.Run("FreezeUnfreeze", func(t *testing.T) {
        err := service.FreezeCredits(userID, 100, "order_payment")
        assert.NoError(t, err)
        
        credits, _ := service.GetUserCredits(userID)
        assert.Equal(t, 100, credits.FrozenCredits)
        assert.Equal(t, 350, credits.AvailableCredits)
        
        err = service.UnfreezeCredits(userID, 100, "order_cancelled")
        assert.NoError(t, err)
        
        credits, _ = service.GetUserCredits(userID)
        assert.Equal(t, 0, credits.FrozenCredits)
        assert.Equal(t, 450, credits.AvailableCredits)
    })
}
```

#### 14.1.2 è®¢å•æœåŠ¡æµ‹è¯•
```go
// è®¢å•æœåŠ¡æµ‹è¯•
func TestOrderService(t *testing.T) {
    setupTestDB()
    service := NewOrderService(db, redis)
    
    t.Run("CreateOrder", func(t *testing.T) {
        order, err := service.CreateOrder("user_001", "pkg_standard")
        assert.NoError(t, err)
        assert.NotNil(t, order)
        assert.Equal(t, "pending", order.Status)
        assert.Equal(t, 10.0, order.PriceUSDT)
        assert.Equal(t, 500, order.Credits)
    })
    
    t.Run("ConfirmPayment", func(t *testing.T) {
        // åˆ›å»ºè®¢å•
        order, _ := service.CreateOrder("user_001", "pkg_standard")
        
        // æ¨¡æ‹Ÿæ”¯ä»˜
        txHash := "a1b2c3d4e5f6..."
        err := service.ConfirmPayment(order.ID, txHash, "trc20", 10.0, 20)
        assert.NoError(t, err)
        
        // éªŒè¯è®¢å•çŠ¶æ€
        updated, _ := service.GetOrder(order.ID)
        assert.Equal(t, "completed", updated.Status)
        assert.Equal(t, txHash, updated.PaymentTxHash)
        
        // éªŒè¯ç§¯åˆ†åˆ°è´¦
        credits, _ := service.GetUserCredits("user_001")
        assert.Equal(t, 500, credits.AvailableCredits)
    })
}
```

### 14.2 é›†æˆæµ‹è¯•

#### 14.2.1 å®Œæ•´æ”¯ä»˜æµç¨‹æµ‹è¯•
```go
// ç«¯åˆ°ç«¯æ”¯ä»˜æµ‹è¯•
func TestFullPaymentFlow(t *testing.T) {
    setupTestEnv()
    defer cleanupTestEnv()
    
    // æ­¥éª¤1: ç”¨æˆ·ç™»å½•
    userID := "e2e_test_user"
    token := loginUser(userID, "password123")
    
    // æ­¥éª¤2: é€‰æ‹©å¥—é¤
    packages, _ := GetPackages()
    packageID := packages[1].ID // æ ‡å‡†å¥—é¤
    
    // æ­¥éª¤3: åˆ›å»ºè®¢å•
    order, err := CreateOrder(token, packageID)
    assert.NoError(t, err)
    assert.Equal(t, "pending", order.Status)
    
    // æ­¥éª¤4: æ¨¡æ‹Ÿæ”¯ä»˜ (åœ¨æµ‹è¯•ç¯å¢ƒä¸­)
    paymentAddr := order.PaymentAddress
    amount := order.PriceUSDT
    
    // å‘é€æ¨¡æ‹Ÿäº¤æ˜“
    txHash, err := SimulatePayment(paymentAddr, amount)
    assert.NoError(t, err)
    
    // æ­¥éª¤5: ç¡®è®¤æ”¯ä»˜
    err = ConfirmPayment(order.ID, txHash, "trc20", amount, 20)
    assert.NoError(t, err)
    
    // æ­¥éª¤6: éªŒè¯è®¢å•å®Œæˆ
    time.Sleep(2 * time.Second) // ç­‰å¾…å¼‚æ­¥å¤„ç†
    completedOrder, _ := GetOrder(order.ID)
    assert.Equal(t, "completed", completedOrder.Status)
    
    // æ­¥éª¤7: éªŒè¯ç§¯åˆ†åˆ°è´¦
    credits, _ := GetUserCredits(userID)
    assert.Equal(t, 500, credits.AvailableCredits)
    
    // æ­¥éª¤8: éªŒè¯ç§¯åˆ†æµæ°´
    transactions, _ := GetCreditTransactions(userID, 1, 10)
    assert.True(t, len(transactions) >= 2) // åº”è¯¥æœ‰è´­ä¹°å’Œèµ é€ä¸¤ç¬”
    
    // æ­¥éª¤9: éªŒè¯é€šçŸ¥å‘é€
    notifications := GetUserNotifications(userID)
    assert.True(t, len(notifications) >= 1)
    assert.Contains(t, notifications[0].Title, "æ”¯ä»˜æˆåŠŸ")
}
```

#### 14.2.2 å¹¶å‘æµ‹è¯•
```go
// å¹¶å‘ç§¯åˆ†æ‰£å‡æµ‹è¯•
func TestConcurrentDeduction(t *testing.T) {
    setupTestDB()
    service := NewCreditService(db, redis)
    userID := "concurrent_user"
    
    // åˆå§‹ç§¯åˆ†1000
    service.AddCredits(userID, 1000, "test", "init", nil)
    
    // å¹¶å‘æ‰£å‡100æ¬¡ï¼Œæ¯æ¬¡10ç§¯åˆ†
    var wg sync.WaitGroup
    for i := 0; i < 100; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            err := service.DeductCredits(userID, 10, "test", "concurrent", "test", fmt.Sprintf("id_%d", i))
            // å…è®¸éƒ¨åˆ†å¤±è´¥(ç§¯åˆ†ä¸è¶³)
            if err != nil {
                assert.Contains(t, err.Error(), "insufficient_credits")
            }
        }()
    }
    
    wg.Wait()
    
    // éªŒè¯æœ€ç»ˆä½™é¢ (æœ€å¤šå‰©ä½™0æˆ–10ç§¯åˆ†)
    credits, _ := service.GetUserCredits(userID)
    assert.True(t, credits.AvailableCredits >= 0 && credits.AvailableCredits <= 10)
}
```

### 14.3 æ€§èƒ½æµ‹è¯•

#### 14.3.1 è´Ÿè½½æµ‹è¯•
```go
// æ€§èƒ½æµ‹è¯• - å¥—é¤æŸ¥è¯¢
func BenchmarkGetPackages(b *testing.B) {
    setupTestDB()
    service := NewPackageService(db, redis)
    
    b.ResetTimer()
    for i := 0; i < b.N; i++ {
        _, err := service.GetPackages()
        if err != nil {
            b.Fatalf("GetPackages failed: %v", err)
        }
    }
}

// æ€§èƒ½æµ‹è¯• - ç§¯åˆ†æ‰£å‡
func BenchmarkDeductCredits(b *testing.B) {
    setupTestDB()
    service := NewCreditService(db, redis)
    userID := "perf_test_user"
    
    // å‡†å¤‡æµ‹è¯•æ•°æ®
    service.AddCredits(userID, 10000, "test", "benchmark", nil)
    
    b.ResetTimer()
    for i := 0; i < b.N; i++ {
        err := service.DeductCredits(userID, 1, "benchmark", "test", "test", fmt.Sprintf("id_%d", i))
        if err != nil {
            b.Fatalf("DeductCredits failed: %v", err)
        }
    }
}
```

#### 14.3.2 å‹åŠ›æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
# å‹åŠ›æµ‹è¯•è„šæœ¬

echo "å¼€å§‹å‹åŠ›æµ‹è¯•..."

# å¹¶å‘ç”¨æˆ·ç™»å½•
ab -n 10000 -c 100 -H "Authorization: Bearer $TOKEN" \
   http://localhost:8080/api/v1/credits

# å¹¶å‘å¥—é¤æŸ¥è¯¢
ab -n 50000 -c 200 \
   http://localhost:8080/api/v1/packages

# å¹¶å‘ç§¯åˆ†æ‰£å‡
ab -n 5000 -c 50 -H "Authorization: Bearer $TOKEN" -p payload.json \
   http://localhost:8080/api/v1/consume

echo "å‹åŠ›æµ‹è¯•å®Œæˆ"
```

### 14.4 æµ‹è¯•è¦†ç›–ç‡

#### 14.4.1 è¦†ç›–ç‡ç›®æ ‡
```yaml
# æµ‹è¯•è¦†ç›–ç‡è¦æ±‚
coverage:
  overall: 85%           # æ€»ä½“è¦†ç›–ç‡ >= 85%
  critical: 95%          # æ ¸å¿ƒé€»è¾‘è¦†ç›–ç‡ >= 95%
  packages: 80%          # å¥—é¤æ¨¡å— >= 80%
  orders: 85%            # è®¢å•æ¨¡å— >= 85%
  payments: 90%          # æ”¯ä»˜æ¨¡å— >= 90%
  credits: 90%           # ç§¯åˆ†æ¨¡å— >= 90%
  membership: 85%        # ä¼šå‘˜æ¨¡å— >= 85%
```

#### 14.4.2 æµ‹è¯•æŠ¥å‘Š
```bash
# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
go test -v -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
go tool cover -func=coverage.out

# æœŸæœ›è¾“å‡ºç¤ºä¾‹:
# github.com/nofx/service/credit/service.go:45:   AddCredits            95.2%
# github.com/nofx/service/credit/service.go:67:   DeductCredits         92.8%
# github.com/nofx/service/credit/service.go:89:   FreezeCredits         90.0%
# github.com/nofx/service/credit/service.go:101:  UnfreezeCredits       88.5%
# github.com/nofx/service/credit/service.go:113:  HasEnoughCredits      100.0%
```

---

## 15. éƒ¨ç½²æ–¹æ¡ˆ

### 15.1 å®¹å™¨åŒ–éƒ¨ç½²

#### 15.1.1 Dockerfile
```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM node:18-alpine AS frontend-builder
WORKDIR /app
COPY web/package*.json ./
RUN npm ci --only=production
COPY web/ ./
RUN npm run build

FROM golang:1.21-alpine AS backend-builder
WORKDIR /app
COPY . .
RUN go mod download
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/

# å¤åˆ¶åç«¯
COPY --from=backend-builder /app/main .
# å¤åˆ¶å‰ç«¯
COPY --from=frontend-builder /app/dist ./web/dist
# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY config/ ./config/

EXPOSE 8080
CMD ["./main"]
```

#### 15.1.2 Docker Compose
```yaml
# docker-compose.yml
version: '3.8'

services:
  # ä¸»åº”ç”¨
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_USER=nofx
      - DB_PASSWORD=password
      - DB_NAME=nofx_credits
      - REDIS_HOST=redis
      - REDIS_PORT=6379
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_USER=nofx
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=nofx_credits
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    ports:
      - "5432:5432"
    restart: unless-stopped

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped

  # Nginxåå‘ä»£ç†
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - app
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

### 15.2 Kuberneteséƒ¨ç½²

#### 15.2.1 Deploymenté…ç½®
```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nofx-credits
  labels:
    app: nofx-credits
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nofx-credits
  template:
    metadata:
      labels:
        app: nofx-credits
    spec:
      containers:
      - name: app
        image: nofx/credits:latest
        ports:
        - containerPort: 8080
        env:
        - name: DB_HOST
          valueFrom:
            configMapKeyRef:
              name: nofx-config
              key: db_host
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: password
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /api/v1/health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /api/v1/health/ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
```

#### 15.2.2 Serviceé…ç½®
```yaml
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: nofx-credits-service
spec:
  selector:
    app: nofx-credits
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
  type: ClusterIP
---
# LoadBalanceræœåŠ¡
apiVersion: v1
kind: Service
metadata:
  name: nofx-credits-lb
spec:
  selector:
    app: nofx-credits
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
  type: LoadBalancer
```

#### 15.2.3 HPAè‡ªåŠ¨æ‰©ç¼©å®¹
```yaml
# k8s/hpa.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: nofx-credits-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nofx-credits
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

### 15.3 CI/CDæµæ°´çº¿

#### 15.3.1 GitHub Actions
```yaml
# .github/workflows/deploy.yml
name: Deploy Credit System

on:
  push:
    branches: [ main, dev ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Go
      uses: actions/setup-go@v3
      with:
        go-version: '1.21'
    
    - name: Run tests
      run: |
        go test -v -race -coverprofile=coverage.out ./...
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3

  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Build Docker image
      run: |
        docker build -t nofx/credits:${{ github.sha }} .
        docker tag nofx/credits:${{ github.sha }} nofx/credits:latest

  deploy-dev:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/dev'
    steps:
    - name: Deploy to dev
      run: |
        echo "Deploying to development environment..."
        # kubectl apply -f k8s/dev/

  deploy-prod:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
    - name: Deploy to production
      run: |
        echo "Deploying to production environment..."
        # kubectl apply -f k8s/prod/
```

### 15.4 ç°åº¦å‘å¸ƒ

#### 15.4.1 é‡‘ä¸é›€å‘å¸ƒ
```yaml
# canary-deployment.yaml
apiVersion: argoproj.io/v1alpha1
kind: Rollout
metadata:
  name: nofx-credits-rollout
spec:
  replicas: 10
  strategy:
    canary:
      steps:
      - setWeight: 10
      - pause: {duration: 30s}
      - setWeight: 50
      - pause: {duration: 60s}
      - setWeight: 100
      analysis:
        templates:
        - templateName: success-rate
        args:
        - name: service-name
          value: nofx-credits-service
  revisionHistoryLimit: 2
  selector:
    matchLabels:
      app: nofx-credits
  template:
    metadata:
      labels:
        app: nofx-credits
    spec:
      containers:
      - name: app
        image: nofx/credits:latest
```

#### 15.4.2 ç›‘æ§å’Œå›æ»š
```bash
#!/bin/bash
# éƒ¨ç½²è„šæœ¬ - åŒ…å«ç›‘æ§å’Œè‡ªåŠ¨å›æ»š

DEPLOY_VERSION="$1"
MAX_ERROR_RATE=5  # æœ€å¤§é”™è¯¯ç‡5%

echo "å¼€å§‹éƒ¨ç½²ç‰ˆæœ¬: $DEPLOY_VERSION"

# éƒ¨ç½²æ–°ç‰ˆæœ¬
kubectl set image deployment/nofx-credits \
  app=nofx/credits:$DEPLOY_VERSION

# ç­‰å¾…éƒ¨ç½²å®Œæˆ
kubectl rollout status deployment/nofx-credits

# ç›‘æ§é”™è¯¯ç‡
echo "ç›‘æ§é”™è¯¯ç‡..."
ERROR_RATE=0
for i in {1..60}; do
    # è·å–é”™è¯¯ç‡ (å®é™…é¡¹ç›®ä¸­ä»ç›‘æ§ç³»ç»Ÿè·å–)
    ERROR_RATE=$(get_error_rate)
    echo "å½“å‰é”™è¯¯ç‡: $ERROR_RATE%"
    
    if (( $(echo "$ERROR_RATE > $MAX_ERROR_RATE" | bc -l) )); then
        echo "é”™è¯¯ç‡è¶…è¿‡é˜ˆå€¼ï¼Œå¼€å§‹å›æ»š..."
        kubectl rollout undo deployment/nofx-credits
        exit 1
    fi
    
    sleep 10
done

echo "éƒ¨ç½²æˆåŠŸå®Œæˆ"
```

---

## 16. è¿è¥ç­–ç•¥

### 16.1 ç”¨æˆ·å¢é•¿ç­–ç•¥

#### 16.1.1 æ–°ç”¨æˆ·å¼•å¯¼
```go
// æ–°ç”¨æˆ·å¼•å¯¼æµç¨‹
type OnboardingFlow struct {
    Steps []OnboardingStep `json:"steps"`
}

type OnboardingStep struct {
    Order       int                    `json:"order"`
    Title       map[string]string      `json:"title"`       // å¤šè¯­è¨€æ ‡é¢˜
    Description map[string]string      `json:"description"` // å¤šè¯­è¨€æè¿°
    Action      string                 `json:"action"`      // æ“ä½œç±»å‹
    TargetURL   string                 `json:"target_url"`  // è·³è½¬é“¾æ¥
    AutoNext    bool                   `json:"auto_next"`   // æ˜¯å¦è‡ªåŠ¨ä¸‹ä¸€æ­¥
    Reward      *OnboardingReward      `json:"reward"`      // å¥–åŠ±
}

var DefaultOnboardingFlow = OnboardingFlow{
    Steps: []OnboardingStep{
        {
            Order: 1,
            Title: map[string]string{
                "zh-CN": "æ¬¢è¿ä½¿ç”¨ Monnaire Trading Agent OS",
                "en-US": "Welcome to Monnaire Trading Agent OS",
            },
            Description: map[string]string{
                "zh-CN": "è®©æˆ‘ä»¬èŠ±2åˆ†é’Ÿå¿«é€Ÿäº†è§£å¦‚ä½•ä½¿ç”¨AIè¿›è¡Œè‡ªåŠ¨äº¤æ˜“",
                "en-US": "Let's take 2 minutes to learn how to trade with AI",
            },
            Action: "watch_video",
            TargetURL: "/tutorial",
            AutoNext: false,
            Reward: &OnboardingReward{
                Credits: 50,
                Type: "bonus",
            },
        },
        {
            Order: 2,
            Title: map[string]string{
                "zh-CN": "åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªäº¤æ˜“å‘˜",
                "en-US": "Create Your First Trader",
            },
            Action: "create_trader",
            TargetURL: "/traders/new",
            AutoNext: false,
        },
        {
            Order: 3,
            Title: map[string]string{
                "zh-CN": "å®Œæˆé¦–æ¬¡AIå†³ç­–",
                "en-US": "Make Your First AI Decision",
            },
            Action: "make_decision",
            TargetURL: "/demo",
            AutoNext: false,
            Reward: &OnboardingReward{
                Credits: 100,
                Type: "bonus",
            },
        },
    },
}
```

#### 16.1.2 æ¨èå¥–åŠ±æœºåˆ¶
```go
// æ¨èè®¡åˆ’é…ç½®
type ReferralProgram struct {
    Enabled       bool    `json:"enabled"`        // æ˜¯å¦å¯ç”¨
    ReferrerBonus int     `json:"referrer_bonus"` // æ¨èäººå¥–åŠ±ç§¯åˆ†
    RefereeBonus  int     `json:"referee_bonus"`  // è¢«æ¨èäººå¥–åŠ±ç§¯åˆ†
    MaxRewards    int     `json:"max_rewards"`    // æ¯äººæœ€å¤§æ¨èæ¬¡æ•°
    ExpiryDays    int     `json:"expiry_days"`    // å¥–åŠ±æœ‰æ•ˆæœŸ
    Tiers         []ReferralTier `json:"tiers"`    // é˜¶æ¢¯å¥–åŠ±
}

type ReferralTier struct {
    Level       int  `json:"level"`        // ç­‰çº§
    Referrals   int  `json:"referrals"`    // éœ€è¦æ¨èäººæ•°
    BonusMultiplier float64 `json:"bonus_multiplier"` // å¥–åŠ±å€æ•°
}

var DefaultReferralProgram = ReferralProgram{
    Enabled:       true,
    ReferrerBonus: 200,  // æ¨èæˆåŠŸå¥–åŠ±200ç§¯åˆ†
    RefereeBonus:  100,  // æ–°ç”¨æˆ·æ³¨å†Œå¥–åŠ±100ç§¯åˆ†
    MaxRewards:    50,   // æœ€å¤šæ¨è50äºº
    ExpiryDays:    90,   // å¥–åŠ±90å¤©æœ‰æ•ˆ
    Tiers: []ReferralTier{
        {Level: 1, Referrals: 5,  BonusMultiplier: 1.0},
        {Level: 2, Referrals: 20, BonusMultiplier: 1.5},
        {Level: 3, Referrals: 50, BonusMultiplier: 2.0},
    },
}
```

### 16.2 ä¿ƒé”€æ´»åŠ¨è®¾è®¡

#### 16.2.1 é™æ—¶æŠ˜æ‰£
```go
// ä¿ƒé”€æ´»åŠ¨é…ç½®
type Promotion struct {
    ID              string    `json:"id"`
    Name            map[string]string `json:"name"`             // æ´»åŠ¨åç§°
    Description     map[string]string `json:"description"`      // æ´»åŠ¨æè¿°
    Type            string    `json:"type"`                    // ç±»å‹: discount/bonus/gift
    DiscountPercent *float64  `json:"discount_percent"`        // æŠ˜æ‰£ç™¾åˆ†æ¯”
    BonusCredits    *int      `json:"bonus_credits"`           // èµ é€ç§¯åˆ†
    MinPurchase     *float64  `json:"min_purchase"`            // æœ€ä½æ¶ˆè´¹
    MaxDiscount     *float64  `json:"max_discount"`            // æœ€å¤§æŠ˜æ‰£
    StartTime       time.Time `json:"start_time"`              // å¼€å§‹æ—¶é—´
    EndTime         time.Time `json:"end_time"`                // ç»“æŸæ—¶é—´
    UsageLimit      int       `json:"usage_limit"`             // ä½¿ç”¨æ¬¡æ•°é™åˆ¶
    UsedCount       int       `json:"used_count"`              // å·²ä½¿ç”¨æ¬¡æ•°
    EligibleLevels  []string  `json:"eligible_levels"`         // é€‚ç”¨ä¼šå‘˜ç­‰çº§
    Stackable       bool      `json:"stackable"`               // æ˜¯å¦å¯å åŠ 
    Active          bool      `json:"active"`
}

// åŒ11æ´»åŠ¨ç¤ºä¾‹
var Double11Promotion = Promotion{
    ID:   "promo_2025_1111",
    Name: map[string]string{
        "zh-CN": "åŒ11ç‹‚æ¬¢èŠ‚ - ç§¯åˆ†ä¹°1é€1",
        "en-US": "Double 11 Sale - Buy 1 Get 1",
    },
    Type:            "bonus",
    BonusCredits:    100,  // ä¹°10Ué€100ç§¯åˆ†
    MinPurchase:     10.0,
    StartTime:       time.Date(2025, 11, 11, 0, 0, 0, 0, time.UTC),
    EndTime:         time.Date(2025, 11, 11, 23, 59, 59, 0, time.UTC),
    UsageLimit:      3,    // æ¯ç”¨æˆ·é™ç”¨3æ¬¡
    EligibleLevels:  []string{"free", "bronze", "silver", "gold", "platinum"},
    Stackable:       false,
    Active:          true,
}
```

#### 16.2.2 ä¼šå‘˜æ—¥æ´»åŠ¨
```go
// æ¯æœˆä¼šå‘˜æ—¥
var MemberDayPromotion = Promotion{
    ID:   "promo_monthly",
    Name: map[string]string{
        "zh-CN": "æ¯æœˆ15æ—¥ä¼šå‘˜æ—¥ - ä¸“äº«9æŠ˜ä¼˜æƒ ",
        "en-US": "Member's Day 15th - 10% OFF",
    },
    Type:            "discount",
    DiscountPercent: 10.0,  // 9æŠ˜
    MinPurchase:     5.0,
    StartTime:       time.Date(2025, 11, 15, 0, 0, 0, 0, time.UTC),
    EndTime:         time.Date(2025, 11, 15, 23, 59, 59, 0, time.UTC),
    UsageLimit:      1,     // æ¯æœˆé™ç”¨1æ¬¡
    EligibleLevels:  []string{"bronze", "silver", "gold", "platinum"},
    Stackable:       false,
    Active:          true,
}
```

### 16.3 ç”¨æˆ·ç•™å­˜ç­–ç•¥

#### 16.3.1 ç§¯åˆ†åˆ°æœŸæé†’
```go
// ç§¯åˆ†åˆ°æœŸæé†’ä»»åŠ¡
type ExpiryReminderJob struct {
    userID        string
    expiringCredits int
    daysLeft      int
    scheduledTime time.Time
}

func (j *ExpiryReminderJob) SendReminder() error {
    user, _ := GetUser(j.userID)
    
    // ç”Ÿæˆå¤šè¯­è¨€æé†’å†…å®¹
    subjectMap := map[string]string{
        "zh-CN": fmt.Sprintf("âš ï¸ æ‚¨æœ‰ %d ç§¯åˆ†å°†åœ¨ %d å¤©åè¿‡æœŸ", j.expiringCredits, j.daysLeft),
        "en-US": fmt.Sprintf("âš ï¸ %d credits will expire in %d days", j.expiringCredits, j.daysLeft),
    }
    
    // å‘é€é‚®ä»¶
    if err := SendEmail(user.Email, subjectMap[user.Locale], j.generateReminderContent(user)); err != nil {
        return err
    }
    
    // ç«™å†…é€šçŸ¥
    CreateNotification(user.ID, "credits_expiring", map[string]interface{}{
        "expiring_credits": j.expiringCredits,
        "days_left":        j.daysLeft,
    })
    
    return nil
}

// å®šæ—¶ä»»åŠ¡: æ¯å¤©æ£€æŸ¥å³å°†è¿‡æœŸçš„ç§¯åˆ†
func ScheduleExpiryReminders() {
    ticker := time.NewTicker(24 * time.Hour)
    go func() {
        for range ticker.C {
            checkExpiringCredits()
        }
    }()
}
```

#### 16.3.2 æµå¤±ç”¨æˆ·å¬å›
```go
// æµå¤±ç”¨æˆ·è¯†åˆ«å’Œå¬å›
type ChurnPrediction struct {
    UserID            string  `json:"user_id"`
    LastLoginAt       time.Time `json:"last_login_at"`
    DaysInactive      int     `json:"days_inactive"`
    LastPurchaseAt    time.Time `json:"last_purchase_at"`
    CreditsBalance    int     `json:"credits_balance"`
    ChurnScore        float64 `json:"churn_score"` // 0-1ï¼Œåˆ†æ•°è¶Šé«˜æµå¤±æ¦‚ç‡è¶Šå¤§
    RecommendedAction string  `json:"recommended_action"`
}

// æµå¤±å¬å›æ´»åŠ¨
var ChurnRecallCampaign = map[string]Promotion{
    "high_risk": {
        Name: map[string]string{
            "zh-CN": "ä¸“å±å›å½’ç¤¼åŒ… - 300ç§¯åˆ†å…è´¹é€",
            "en-US": "Exclusive Comeback Gift - 300 Free Credits",
        },
        Type:         "gift",
        BonusCredits: 300,
        MinPurchase:  0,  // æ— éœ€è´­ä¹°
        EligibleLevels: []string{"bronze", "silver", "gold", "platinum"},
        Active:       true,
    },
    "medium_risk": {
        Name: map[string]string{
            "zh-CN": "æ¬¢è¿å›æ¥ - 5æŠ˜ä¼˜æƒ ä»»é€‰å¥—é¤",
            "en-US": "Welcome Back - 50% OFF Any Package",
        },
        Type:            "discount",
        DiscountPercent: 50.0,
        MinPurchase:     5.0,
        EligibleLevels:  []string{"free", "bronze", "silver", "gold", "platinum"},
        Active:          true,
    },
}
```

### 16.4 æ•°æ®é©±åŠ¨ä¼˜åŒ–

#### 16.4.1 A/Bæµ‹è¯•æ¡†æ¶
```go
// A/Bæµ‹è¯•é…ç½®
type ABTest struct {
    ID          string        `json:"id"`
    Name        string        `json:"name"`
    Description string        `json:"description"`
    Variants    []TestVariant `json:"variants"`     // æµ‹è¯•å˜ä½“
    TrafficSplit int          `json:"traffic_split"` // æµé‡åˆ†é…ç™¾åˆ†æ¯”
    Metrics     []string      `json:"metrics"`       // è·Ÿè¸ªæŒ‡æ ‡
    StartTime   time.Time     `json:"start_time"`
    EndTime     time.Time     `json:"end_time"`
    Status      string        `json:"status"`        // running/completed/paused
}

// å¥—é¤å®šä»·A/Bæµ‹è¯•
var PricingABTest = ABTest{
    ID:          "ab_test_pricing_001",
    Name:        "Standard Package Pricing",
    Description: "æµ‹è¯•æ ‡å‡†å¥—é¤ä¸åŒå®šä»·å¯¹è½¬åŒ–ç‡çš„å½±å“",
    Variants: []TestVariant{
        {
            Name:   "control",
            Traffic: 50, // 50%ç”¨æˆ·çœ‹åˆ°åŸä»·10U
            Config: map[string]interface{}{
                "package_id": "pkg_standard",
                "price":      10.0,
                "credits":    500,
                "bonus":      50,
            },
        },
        {
            Name:   "variant_a",
            Traffic: 50, // 50%ç”¨æˆ·çœ‹åˆ°æä»·12Ué€æ›´å¤šç§¯åˆ†
            Config: map[string]interface{}{
                "package_id": "pkg_standard_v2",
                "price":      12.0,
                "credits":    600,
                "bonus":      60,
            },
        },
    },
    Metrics: []string{
        "conversion_rate",
        "revenue_per_user",
        "package_selection_rate",
        "average_order_value",
    },
    StartTime: time.Now(),
    EndTime:   time.Now().Add(30 * 24 * time.Hour), // æµ‹è¯•30å¤©
    Status:    "running",
}
```

#### 16.4.2 ç”¨æˆ·è¡Œä¸ºåˆ†æ
```go
// ç”¨æˆ·è¡Œä¸ºäº‹ä»¶è¿½è¸ª
type UserEvent struct {
    UserID      string                 `json:"user_id"`
    SessionID   string                 `json:"session_id"`
    EventType   string                 `json:"event_type"`  // page_view/package_view/order_create
    EventName   string                 `json:"event_name"`
    Properties  map[string]interface{} `json:"properties"`   // äº‹ä»¶å±æ€§
    Timestamp   time.Time              `json:"timestamp"`
}

// äº‹ä»¶è¿½è¸ªç¤ºä¾‹
func TrackUserEvent(userID, eventType, eventName string, properties map[string]interface{}) {
    event := UserEvent{
        UserID:      userID,
        SessionID:   getSessionID(userID),
        EventType:   eventType,
        EventName:   eventName,
        Properties:  properties,
        Timestamp:   time.Now(),
    }
    
    // å‘é€åˆ°åˆ†æç³»ç»Ÿ
    analyticsClient.Track(event)
    
    // å­˜å‚¨åˆ°æ•°æ®åº“
    SaveUserEvent(event)
}
```

---

## 17. é¡¹ç›®æ—¶é—´è¡¨

### 17.1 å¼€å‘é˜¶æ®µè§„åˆ’

#### 17.1.1 Sprintè§„åˆ’ (2å‘¨ä¸€ä¸ªSprint)

**Sprint 1 (Week 1-2): åŸºç¡€æ¶æ„æ­å»º**
```
Day 1-2: æ•°æ®åº“è®¾è®¡
â”œâ”€ å®Œæˆè¡¨ç»“æ„è®¾è®¡
â”œâ”€ ç¼–å†™å»ºè¡¨SQL
â””â”€ æ•°æ®åº“æµ‹è¯•æ•°æ®å‡†å¤‡

Day 3-5: æ ¸å¿ƒæœåŠ¡å¼€å‘
â”œâ”€ ç§¯åˆ†æœåŠ¡åŸºç¡€CRUD
â”œâ”€ å¥—é¤ç®¡ç†æœåŠ¡
â”œâ”€ ç”¨æˆ·ç§¯åˆ†è´¦æˆ·ç®¡ç†
â””â”€ å•å…ƒæµ‹è¯•ç¼–å†™

Day 6-8: APIæ¥å£å¼€å‘
â”œâ”€ å¥—é¤ç›¸å…³API
â”œâ”€ ç§¯åˆ†æŸ¥è¯¢API
â”œâ”€ åŸºç¡€é‰´æƒ
â””â”€ APIæ–‡æ¡£ç”Ÿæˆ

Day 9-10: å‰ç«¯åŸºç¡€é¡µé¢
â”œâ”€ å¥—é¤åˆ—è¡¨é¡µé¢
â”œâ”€ ç”¨æˆ·ç§¯åˆ†é¡µé¢
â””â”€ åŸºç¡€UIç»„ä»¶

Day 11-14: é›†æˆæµ‹è¯•
â”œâ”€ ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€ æ€§èƒ½åŸºå‡†æµ‹è¯•
â””â”€ ä»£ç å®¡æŸ¥
```

**Sprint 2 (Week 3-4): æ”¯ä»˜ç³»ç»Ÿå¼€å‘**
```
Day 15-17: è®¢å•ç³»ç»Ÿ
â”œâ”€ è®¢å•åˆ›å»ºæµç¨‹
â”œâ”€ è®¢å•çŠ¶æ€ç®¡ç†
â”œâ”€ è®¢å•æŸ¥è¯¢æ¥å£
â””â”€ å¼‚å¸¸è®¢å•å¤„ç†

Day 18-21: æ”¯ä»˜é›†æˆ
â”œâ”€ TRON/ERC20/BEP20é›†æˆ
â”œâ”€ é“¾ä¸Šäº¤æ˜“ç›‘å¬
â”œâ”€ è‡ªåŠ¨ç¡®è®¤æœºåˆ¶
â””â”€ æ”¯ä»˜å›è°ƒå¤„ç†

Day 22-24: æ”¯ä»˜é¡µé¢
â”œâ”€ è®¢å•è¯¦æƒ…é¡µ
â”œâ”€ æ”¯ä»˜ä¿¡æ¯å±•ç¤º
â”œâ”€ äºŒç»´ç ç”Ÿæˆ
â””â”€ å€’è®¡æ—¶åŠŸèƒ½

Day 25-28: æ”¯ä»˜æµ‹è¯•
â”œâ”€ æµ‹è¯•ç½‘ç¯å¢ƒæµ‹è¯•
â”œâ”€ å¤šç½‘ç»œæ”¯ä»˜æµ‹è¯•
â”œâ”€ å¹¶å‘æ”¯ä»˜æµ‹è¯•
â””â”€ å®‰å…¨æ¼æ´æ‰«æ
```

**Sprint 3 (Week 5-6): ç§¯åˆ†æ¶ˆè´¹ä¸ä¼šå‘˜ç³»ç»Ÿ**
```
Day 29-31: ç§¯åˆ†æ¶ˆè´¹æ¨¡å—
â”œâ”€ æ¶ˆè´¹é¡¹ç›®é…ç½®
â”œâ”€ å…è´¹é¢åº¦ç®¡ç†
â”œâ”€ ç§¯åˆ†æ‰£å‡é€»è¾‘
â””â”€ æ¶ˆè´¹è®°å½•æŸ¥è¯¢

Day 32-35: ä¼šå‘˜ç­‰çº§ç³»ç»Ÿ
â”œâ”€ ä¼šå‘˜ç­‰çº§é…ç½®
â”œâ”€ ç­‰çº§è®¡ç®—é€»è¾‘
â”œâ”€ ä¼šå‘˜æƒç›Šè®¡ç®—
â””â”€ ç­‰çº§å˜åŠ¨é€šçŸ¥

Day 36-38: ç®¡ç†åå°
â”œâ”€ å¥—é¤ç®¡ç†é¡µé¢
â”œâ”€ è®¢å•ç®¡ç†é¡µé¢
â”œâ”€ ç”¨æˆ·ç®¡ç†é¡µé¢
â””â”€ æ•°æ®ç»Ÿè®¡çœ‹æ¿

Day 39-42: åŠŸèƒ½å®Œå–„
â”œâ”€ ç¼“å­˜ä¼˜åŒ–
â”œâ”€ æ€§èƒ½è°ƒä¼˜
â”œâ”€ é”™è¯¯å¤„ç†å®Œå–„
â””â”€ æ—¥å¿—ç³»ç»Ÿå®Œå–„
```

**Sprint 4 (Week 7-8): ä¼˜åŒ–ä¸éƒ¨ç½²**
```
Day 43-45: æ€§èƒ½ä¼˜åŒ–
â”œâ”€ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
â”œâ”€ ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
â”œâ”€ APIå“åº”æ—¶é—´ä¼˜åŒ–
â””â”€ å¹¶å‘å¤„ç†ä¼˜åŒ–

Day 46-49: å®‰å…¨åŠ å›º
â”œâ”€ å®‰å…¨æµ‹è¯•
â”œâ”€ æ¸—é€æµ‹è¯•
â”œâ”€ æ”¯ä»˜å®‰å…¨éªŒè¯
â””â”€ æ•°æ®åŠ å¯†éªŒè¯

Day 50-52: éƒ¨ç½²å‡†å¤‡
â”œâ”€ Dockerå®¹å™¨åŒ–
â”œâ”€ CI/CDæµæ°´çº¿
â”œâ”€ ç›‘æ§å‘Šè­¦é…ç½®
â””â”€ æ–‡æ¡£å®Œå–„

Day 53-56: æµ‹è¯•ä¸ä¸Šçº¿
â”œâ”€ UATæµ‹è¯•
â”œâ”€ ç°åº¦å‘å¸ƒ
â”œâ”€ ç›‘æ§æ•°æ®ç¡®è®¤
â””â”€ æ­£å¼å‘å¸ƒ
```

### 17.2 é‡Œç¨‹ç¢‘èŠ‚ç‚¹

#### 17.2.1 å…³é”®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´ | äº¤ä»˜ç‰© | éªŒæ”¶æ ‡å‡† |
|--------|------|--------|----------|
| **M1: åŸºç¡€æ¶æ„å®Œæˆ** | Week 2 | æ•°æ®åº“è®¾è®¡ã€æ ¸å¿ƒAPIã€åŸºç¡€é¡µé¢ | é€šè¿‡å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ç‡>80% |
| **M2: æ”¯ä»˜ç³»ç»Ÿå°±ç»ª** | Week 4 | è®¢å•ç³»ç»Ÿã€æ”¯ä»˜é›†æˆã€æµ‹è¯•ç½‘ç¯å¢ƒ | æ”¯ä»˜æˆåŠŸç‡>95% |
| **M3: æ ¸å¿ƒåŠŸèƒ½å®Œæ•´** | Week 6 | ç§¯åˆ†æ¶ˆè´¹ã€ä¼šå‘˜ä½“ç³»ã€ç®¡ç†åå° | æ‰€æœ‰æ ¸å¿ƒæµç¨‹å¯ç”¨ |
| **M4: æ€§èƒ½è¾¾æ ‡** | Week 7 | æ€§èƒ½ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ | APIå“åº”<200ms |
| **M5: å®‰å…¨å®¡æŸ¥é€šè¿‡** | Week 7 | å®‰å…¨æµ‹è¯•æŠ¥å‘Š | æ— é«˜å±æ¼æ´ |
| **M6: æ­£å¼ä¸Šçº¿** | Week 8 | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² | ç³»ç»Ÿç¨³å®šè¿è¡Œ |

#### 17.2.2 æµ‹è¯•é˜¶æ®µè§„åˆ’

```
é˜¶æ®µ1: å•å…ƒæµ‹è¯• (Week 1-6 æŒç»­è¿›è¡Œ)
â”œâ”€ æ¯æ—¥æ„å»ºè§¦å‘
â”œâ”€ è¦†ç›–ç‡ç›‘æ§
â””â”€ è‡ªåŠ¨æµ‹è¯•æŠ¥å‘Š

é˜¶æ®µ2: é›†æˆæµ‹è¯• (Week 5-7)
â”œâ”€ APIé›†æˆæµ‹è¯•
â”œâ”€ ç«¯åˆ°ç«¯æµ‹è¯•
â””â”€ æ€§èƒ½å‹åŠ›æµ‹è¯•

é˜¶æ®µ3: å®‰å…¨æµ‹è¯• (Week 7)
â”œâ”€ å®‰å…¨æ‰«æ
â”œâ”€ æ¸—é€æµ‹è¯•
â””â”€ ä»£ç å®¡è®¡

é˜¶æ®µ4: ç”¨æˆ·éªŒæ”¶æµ‹è¯• (Week 7-8)
â”œâ”€ UATç¯å¢ƒéƒ¨ç½²
â”œâ”€ ä¸šåŠ¡åœºæ™¯æµ‹è¯•
â””â”€ ç”¨æˆ·ä½“éªŒæµ‹è¯•

é˜¶æ®µ5: é¢„å‘å¸ƒ (Week 8)
â”œâ”€ ç°åº¦å‘å¸ƒ10%
â”œâ”€ ç›‘æ§ç³»ç»ŸæŒ‡æ ‡
â””â”€ ç°åº¦æ‰©å¤§è‡³100%
```

### 17.3 èµ„æºæŠ•å…¥

#### 17.3.1 äººåŠ›èµ„æº

| è§’è‰² | äººæ•° | æŠ•å…¥å‘¨æœŸ | ä¸»è¦èŒè´£ |
|------|------|----------|----------|
| **é¡¹ç›®ç»ç†** | 1 | 8å‘¨ | é¡¹ç›®ç®¡ç†ã€è¿›åº¦è·Ÿè¸ªã€é£é™©æ§åˆ¶ |
| **åç«¯å·¥ç¨‹å¸ˆ** | 2 | 8å‘¨ | APIå¼€å‘ã€ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åº“è®¾è®¡ |
| **å‰ç«¯å·¥ç¨‹å¸ˆ** | 1 | 8å‘¨ | UIå¼€å‘ã€å‰ç«¯äº¤äº’ã€é¡µé¢ä¼˜åŒ– |
| **DevOpså·¥ç¨‹å¸ˆ** | 1 | 6å‘¨ | éƒ¨ç½²ã€ç›‘æ§ã€æ—¥å¿—ç³»ç»Ÿ |
| **æµ‹è¯•å·¥ç¨‹å¸ˆ** | 1 | 6å‘¨ | æµ‹è¯•ç”¨ä¾‹ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ€§èƒ½æµ‹è¯• |
| **UI/UXè®¾è®¡å¸ˆ** | 0.5 | 4å‘¨ | ç•Œé¢è®¾è®¡ã€äº¤äº’è®¾è®¡ |

**æ€»äººå¤©**: çº¦400äººå¤©

#### 17.3.2 æŠ€æœ¯èµ„æº

```
å¼€å‘ç¯å¢ƒ:
â”œâ”€ å¼€å‘æœåŠ¡å™¨: 4æ ¸16G x2
â”œâ”€ æµ‹è¯•æ•°æ®åº“: PostgreSQL 15
â”œâ”€ ç¼“å­˜æœåŠ¡å™¨: Redis 7
â”œâ”€ å‰ç«¯æ„å»º: Node.js 18
â””â”€ ç‰ˆæœ¬æ§åˆ¶: Git

æµ‹è¯•ç¯å¢ƒ:
â”œâ”€ é›†æˆæµ‹è¯•æœåŠ¡å™¨: 4æ ¸16G x2
â”œâ”€ æ€§èƒ½æµ‹è¯•æœåŠ¡å™¨: 8æ ¸32G x1
â”œâ”€ æµ‹è¯•ç½‘ç¯å¢ƒ: TRON/ETHæµ‹è¯•ç½‘
â””â”€ è‡ªåŠ¨åŒ–æµ‹è¯•: Selenium

ç”Ÿäº§ç¯å¢ƒ:
â”œâ”€ åº”ç”¨æœåŠ¡å™¨: 8æ ¸32G x3 (è´Ÿè½½å‡è¡¡)
â”œâ”€ æ•°æ®åº“æœåŠ¡å™¨: 16æ ¸64G x1 (ä¸»ä»)
â”œâ”€ ç¼“å­˜æœåŠ¡å™¨: 8æ ¸32G x2 (å“¨å…µæ¨¡å¼)
â”œâ”€ æ–‡ä»¶å­˜å‚¨: CDN + å¯¹è±¡å­˜å‚¨
â””â”€ ç›‘æ§å‘Šè­¦: Prometheus + Grafana
```

### 17.4 é£é™©æ§åˆ¶

#### 17.4.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|----------|
| **æ”¯ä»˜ç¡®è®¤å»¶è¿Ÿ** | ä¸­ | é«˜ | å¤šç½‘ç»œå¹¶è¡Œç¡®è®¤ã€è¶…æ—¶é‡è¯•æœºåˆ¶ |
| **æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ** | ä¸­ | ä¸­ | ç´¢å¼•ä¼˜åŒ–ã€è¯»å†™åˆ†ç¦»ã€ç¼“å­˜ç­–ç•¥ |
| **å¹¶å‘ç§¯åˆ†æ‰£å‡å†²çª** | ä½ | é«˜ | ä¹è§‚é”ã€äº‹åŠ¡æ§åˆ¶ã€é˜Ÿåˆ—å¤„ç† |
| **ç¬¬ä¸‰æ–¹ä¾èµ–æ•…éšœ** | ä½ | é«˜ | é™çº§æ–¹æ¡ˆã€å¤‡ç”¨æœåŠ¡ã€ç›‘æ§å‘Šè­¦ |
| **å®‰å…¨æ¼æ´** | ä½ | é«˜ | å®‰å…¨å®¡è®¡ã€æ¸—é€æµ‹è¯•ã€æ•°æ®åŠ å¯† |

#### 17.4.2 è¿›åº¦é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|----------|
| **éœ€æ±‚å˜æ›´** | ä¸­ | ä¸­ | æ•æ·å¼€å‘ã€å¿«é€Ÿè¿­ä»£ã€ç‰ˆæœ¬æ§åˆ¶ |
| **äººå‘˜å˜åŠ¨** | ä½ | ä¸­ | çŸ¥è¯†æ–‡æ¡£åŒ–ã€äº¤å‰åŸ¹è®­ã€å¤‡ç”¨äººå‘˜ |
| **æŠ€æœ¯éš¾ç‚¹** | ä¸­ | ä¸­ | æŠ€æœ¯é¢„ç ”ã€ä¸“å®¶å’¨è¯¢ã€åŸå‹éªŒè¯ |
| **æµ‹è¯•å»¶æœŸ** | ä¸­ | ä¸­ | è‡ªåŠ¨åŒ–æµ‹è¯•ã€å¹¶è¡Œæµ‹è¯•ã€ä¼˜å…ˆçº§æ’åº |
| **éƒ¨ç½²é—®é¢˜** | ä½ | é«˜ | ç°åº¦å‘å¸ƒã€å›æ»šæ–¹æ¡ˆã€æ¼”ç»ƒéªŒè¯ |

---

## 18. éªŒæ”¶æ ‡å‡†

### 18.1 åŠŸèƒ½éªŒæ”¶æ ‡å‡†

#### 18.1.1 å¥—é¤ç®¡ç†
```
âœ… éªŒæ”¶æ ‡å‡†:
1. ç®¡ç†å‘˜å¯ä»¥åˆ›å»º/ç¼–è¾‘/åˆ é™¤å¥—é¤
2. å¥—é¤ä¿¡æ¯æ­£ç¡®å­˜å‚¨åˆ°æ•°æ®åº“
3. ç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å¥—é¤
4. æ¨èå¥—é¤æ­£ç¡®æ ‡è¯†å’Œæ’åº
5. å¥—é¤è´­ä¹°æ¬¡æ•°é™åˆ¶ç”Ÿæ•ˆ
6. å¤šè¯­è¨€å¥—é¤åç§°æ­£ç¡®æ˜¾ç¤º

âŒ ä¸åˆæ ¼ç¤ºä¾‹:
- å¥—é¤ä¿¡æ¯ä¸¢å¤±æˆ–é”™è¯¯
- ç”¨æˆ·èƒ½çœ‹åˆ°å·²åˆ é™¤å¥—é¤
- æ¨èå¥—é¤æ˜¾ç¤ºé”™ä¹±
- æ— é™æ¬¡è´­ä¹°é™åˆ¶å¤±æ•ˆ
```

#### 18.1.2 ç§¯åˆ†ç³»ç»Ÿ
```
âœ… éªŒæ”¶æ ‡å‡†:
1. ç”¨æˆ·ç§¯åˆ†ä½™é¢å®æ—¶æ›´æ–°
2. ç§¯åˆ†æœ‰æ•ˆæœŸæ­£ç¡®ç®¡ç†
3. ç§¯åˆ†æ‰£å‡å‡†ç¡®æ— è¯¯
4. æµæ°´è®°å½•å®Œæ•´å¯è¿½æº¯
5. ç§¯åˆ†å¯¹è´¦æ— å·®é”™
6. æ”¯æŒæ‰¹é‡ç§¯åˆ†è°ƒæ•´

âŒ ä¸åˆæ ¼ç¤ºä¾‹:
- ç§¯åˆ†ä½™é¢æ˜¾ç¤ºé”™è¯¯
- ç§¯åˆ†æ¶ˆè´¹åæœªè®°å½•
- å¤šç”¨æˆ·ç§¯åˆ†æ•°æ®æ··ä¹±
- è¿‡æœŸç§¯åˆ†æœªæ­£ç¡®å¤„ç†
```

#### 18.1.3 è®¢å•æ”¯ä»˜
```
âœ… éªŒæ”¶æ ‡å‡†:
1. è®¢å•åˆ›å»ºæµç¨‹é¡ºç•…
2. æ”¯ä»˜åœ°å€ç”Ÿæˆæ­£ç¡®
3. é“¾ä¸Šç¡®è®¤è‡ªåŠ¨å®Œæˆ
4. è®¢å•çŠ¶æ€å®æ—¶æ›´æ–°
5. æ”¯ä»˜æˆåŠŸç§¯åˆ†åˆ°è´¦
6. å¼‚å¸¸è®¢å•å¦¥å–„å¤„ç†

âŒ ä¸åˆæ ¼ç¤ºä¾‹:
- è®¢å•å·é‡å¤
- æ”¯ä»˜ç¡®è®¤å¤±è´¥
- ç§¯åˆ†æœªåŠæ—¶åˆ°è´¦
- è¶…æ—¶æœªæ”¯ä»˜æœªè‡ªåŠ¨å–æ¶ˆ
```

#### 18.1.4 ä¼šå‘˜ä½“ç³»
```
âœ… éªŒæ”¶æ ‡å‡†:
1. ä¼šå‘˜ç­‰çº§è‡ªåŠ¨è®¡ç®—
2. æƒç›ŠæŠ˜æ‰£æ­£ç¡®åº”ç”¨
3. ç­‰çº§å˜åŠ¨å®æ—¶ç”Ÿæ•ˆ
4. å‡çº§å¥–åŠ±åŠæ—¶å‘æ”¾
5. ä¼šå‘˜ä¸“å±åŠŸèƒ½é™åˆ¶ç”Ÿæ•ˆ
6. ç­‰çº§å›¾æ ‡é¢œè‰²æ­£ç¡®æ˜¾ç¤º

âŒ ä¸åˆæ ¼ç¤ºä¾‹:
- ç­‰çº§è®¡ç®—é”™è¯¯
- æŠ˜æ‰£æœªç”Ÿæ•ˆ
- ç”¨æˆ·æœªå‡çº§ä½†æ˜¾ç¤ºå‡çº§
- æƒç›Šé™åˆ¶å¤±æ•ˆ
```

### 18.2 æ€§èƒ½éªŒæ”¶æ ‡å‡†

#### 18.2.1 å“åº”æ—¶é—´è¦æ±‚
```
APIæ€§èƒ½æ ‡å‡†:
â”œâ”€ å¥—é¤æŸ¥è¯¢: < 100ms (P95)
â”œâ”€ ç§¯åˆ†ä½™é¢æŸ¥è¯¢: < 50ms (P95)
â”œâ”€ åˆ›å»ºè®¢å•: < 200ms (P95)
â”œâ”€ ç§¯åˆ†æ‰£å‡: < 100ms (P95)
â”œâ”€ è®¢å•æŸ¥è¯¢: < 150ms (P95)
â””â”€ ä¼šå‘˜ç­‰çº§æŸ¥è¯¢: < 80ms (P95)

é¡µé¢æ€§èƒ½æ ‡å‡†:
â”œâ”€ å¥—é¤åˆ—è¡¨åŠ è½½: < 1.5s (FCP)
â”œâ”€ ç§¯åˆ†é¡µé¢åŠ è½½: < 1.0s (FCP)
â”œâ”€ æ”¯ä»˜é¡µé¢åŠ è½½: < 1.2s (FCP)
â”œâ”€ è®¢å•åˆ—è¡¨åŠ è½½: < 1.5s (FCP)
â””â”€ é¡µé¢åˆ‡æ¢å“åº”: < 300ms
```

#### 18.2.2 å¹¶å‘å¤„ç†èƒ½åŠ›
```
å¹¶å‘æŒ‡æ ‡:
â”œâ”€ åŒæ—¶åœ¨çº¿ç”¨æˆ·: 1,000+
â”œâ”€ å¹¶å‘APIè¯·æ±‚: 500 req/s
â”œâ”€ å¹¶å‘æ”¯ä»˜ç¡®è®¤: 100 tps
â”œâ”€ å¹¶å‘ç§¯åˆ†æ‰£å‡: 200 tps
â”œâ”€ æ•°æ®åº“è¿æ¥æ± : 100 è¿æ¥
â””â”€ ç¼“å­˜å‘½ä¸­ç‡: > 90%

å‹åŠ›æµ‹è¯•æ ‡å‡†:
â”œâ”€ 100å¹¶å‘ç”¨æˆ·: å“åº”æ—¶é—´æ­£å¸¸
â”œâ”€ 500å¹¶å‘ç”¨æˆ·: å“åº”æ—¶é—´å¢åŠ <50%
â”œâ”€ 1000å¹¶å‘ç”¨æˆ·: ç³»ç»Ÿä¸å´©æºƒ
â””â”€ å³°å€¼æµé‡: è‡ªåŠ¨æ‰©å®¹è‡³2å€å®¹é‡
```

#### 18.2.3 å¯ç”¨æ€§è¦æ±‚
```
ç³»ç»Ÿå¯ç”¨æ€§:
â”œâ”€ æœåŠ¡å¯ç”¨æ€§: â‰¥ 99.9% (æœˆ)
â”œâ”€ æ•°æ®åº“å¯ç”¨æ€§: â‰¥ 99.95% (æœˆ)
â”œâ”€ ç¼“å­˜å¯ç”¨æ€§: â‰¥ 99.9% (æœˆ)
â”œâ”€ è®¡åˆ’å†…ç»´æŠ¤: æ¯æœˆ<4å°æ—¶
â”œâ”€ æ•…éšœæ¢å¤æ—¶é—´: < 15åˆ†é’Ÿ
â””â”€ æ•°æ®å¤‡ä»½: æ¯æ—¥è‡ªåŠ¨å¤‡ä»½

å®¹ç¾èƒ½åŠ›:
â”œâ”€ å•æœºæ•…éšœ: è‡ªåŠ¨åˆ‡æ¢<30ç§’
â”œâ”€ æ•°æ®åº“æ•…éšœ: è¯»å†™åˆ†ç¦»åˆ‡æ¢<1åˆ†é’Ÿ
â”œâ”€ æœºæˆ¿æ•…éšœ: å¼‚åœ°å¤‡ä»½æ¢å¤<1å°æ—¶
â””â”€ æ•°æ®æ¢å¤: RPOâ‰¤15åˆ†é’Ÿ, RTOâ‰¤1å°æ—¶
```

### 18.3 å®‰å…¨éªŒæ”¶æ ‡å‡†

#### 18.3.1 æ•°æ®å®‰å…¨
```
âœ… å®‰å…¨æ ‡å‡†:
1. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ (AES-256)
2. ä¼ è¾“æ•°æ®HTTPSåŠ å¯† (TLS 1.3)
3. æ•°æ®åº“è¿æ¥åŠ å¯†
4. APIå¯†é’¥å®‰å…¨ç®¡ç†
5. æ”¯ä»˜ä¿¡æ¯åŠ å¯†å­˜å‚¨
6. å®šæœŸæ•°æ®å¤‡ä»½éªŒè¯

âŒ å®‰å…¨éšæ‚£:
- æ˜æ–‡å­˜å‚¨å¯†ç æˆ–å¯†é’¥
- HTTPä¼ è¾“æ•æ„Ÿæ•°æ®
- SQLæ³¨å…¥æ¼æ´
- XSSè·¨ç«™è„šæœ¬æ”»å‡»
- CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ 
```

#### 18.3.2 è®¿é—®æ§åˆ¶
```
âœ… è®¿é—®æ§åˆ¶æ ‡å‡†:
1. èº«ä»½è®¤è¯æœºåˆ¶æœ‰æ•ˆ
2. æƒé™æ§åˆ¶ç²’åº¦åˆ°æ¥å£
3. ç®¡ç†å‘˜æ“ä½œæœ‰å®¡è®¡æ—¥å¿—
4. æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯
5. APIé¢‘ç‡é™åˆ¶æœ‰æ•ˆ
6. é˜²æ­¢æš´åŠ›ç ´è§£

âŒ æƒé™æ¼æ´:
- æœªæˆæƒè®¿é—®æ¥å£
- æƒé™ç»•è¿‡
- è¶Šæƒæ“ä½œ
- ä¼šè¯åŠ«æŒ
- ç®¡ç†å‘˜æƒé™æ³„éœ²
```

#### 18.3.3 æ”¯ä»˜å®‰å…¨
```
âœ… æ”¯ä»˜å®‰å…¨æ ‡å‡†:
1. äº¤æ˜“é‡‘é¢éªŒè¯ä¸¥æ ¼
2. äº¤æ˜“å“ˆå¸Œå”¯ä¸€æ€§æ£€æŸ¥
3. é˜²é‡æ”¾æ”»å‡»æœºåˆ¶
4. å¤šé‡ç­¾åéªŒè¯
5. å¼‚å¸¸äº¤æ˜“ç›‘æ§å‘Šè­¦
6. é€€æ¬¾æµç¨‹å®‰å…¨å¯æ§

âŒ æ”¯ä»˜é£é™©:
- é‡‘é¢ç¯¡æ”¹
- é‡å¤æ”¯ä»˜
- å‡æ”¯ä»˜ç¡®è®¤
- äº¤æ˜“å›æ»šé£é™©
- èµ„é‡‘è¢«ç›—ç”¨
```

### 18.4 å…¼å®¹æ€§éªŒæ”¶æ ‡å‡†

#### 18.4.1 æµè§ˆå™¨å…¼å®¹
```
âœ… æ”¯æŒæµè§ˆå™¨:
â”œâ”€ Chrome >= 90
â”œâ”€ Firefox >= 88
â”œâ”€ Safari >= 14
â”œâ”€ Edge >= 90
â”œâ”€ ç§»åŠ¨ç«¯Safari (iOS 14+)
â””â”€ ç§»åŠ¨ç«¯Chrome (Android 10+)

åŠŸèƒ½ä¸€è‡´æ€§:
â”œâ”€ é¡µé¢å¸ƒå±€ä¸€è‡´
â”œâ”€ äº¤äº’è¡Œä¸ºä¸€è‡´
â”œâ”€ æ•°æ®æ˜¾ç¤ºä¸€è‡´
â””â”€ é”™è¯¯æç¤ºä¸€è‡´
```

#### 18.4.2 è®¾å¤‡é€‚é…
```
âœ… å“åº”å¼æ”¯æŒ:
â”œâ”€ æ¡Œé¢ç«¯: 1920x1080åŠä»¥ä¸Š
â”œâ”€ å¹³æ¿ç«¯: 768x1024 - 1024x1366
â”œâ”€ æ‰‹æœºç«¯: 375x667 - 428x926
â”œâ”€ è¶…å®½å±: 2560x1440åŠä»¥ä¸Š
â””â”€ é«˜DPIå±å¹•é€‚é…

æ€§èƒ½ä¼˜åŒ–:
â”œâ”€ ç§»åŠ¨ç«¯é¡µé¢å¤§å° < 200KB
â”œâ”€ å›¾ç‰‡æ‡’åŠ è½½
â”œâ”€ ä»£ç åˆ†å‰²
â””â”€ CDNåŠ é€Ÿ
```

#### 18.4.3 å›½é™…åŒ–æ”¯æŒ
```
âœ… å¤šè¯­è¨€æ”¯æŒ:
â”œâ”€ ä¸­æ–‡ç®€ä½“ (zh-CN)
â”œâ”€ è‹±æ–‡ (en-US)
â”œâ”€ ä¿„æ–‡ (ru-RU)
â”œâ”€ ä¹Œå…‹å…°æ–‡ (uk-UA)

æœ¬åœ°åŒ–é€‚é…:
â”œâ”€ è´§å¸ç¬¦å·æ­£ç¡®
â”œâ”€ æ—¥æœŸæ ¼å¼æ­£ç¡®
â”œâ”€ æ•°å­—æ ¼å¼æ­£ç¡®
â”œâ”€ æ–‡æ¡ˆé•¿åº¦é€‚é…
â””â”€ ä»å³åˆ°å·¦æ”¯æŒ (é¢„ç•™)
```

### 18.5 ç›‘æ§éªŒæ”¶æ ‡å‡†

#### 18.5.1 ä¸šåŠ¡ç›‘æ§
```
âœ… ç›‘æ§æŒ‡æ ‡:
1. æ”¯ä»˜æˆåŠŸç‡å®æ—¶ç›‘æ§
2. ç§¯åˆ†æ¶ˆè´¹å¼‚å¸¸å‘Šè­¦
3. ä¼šå‘˜ç­‰çº§å˜åŠ¨ç»Ÿè®¡
4. ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ
5. å¥—é¤è´­ä¹°è¶‹åŠ¿ç›‘æ§
6. è½¬åŒ–ç‡æ¼æ–—åˆ†æ

å‘Šè­¦æœºåˆ¶:
â”œâ”€ æ”¯ä»˜æˆåŠŸç‡<95%: ç«‹å³å‘Šè­¦
â”œâ”€ APIé”™è¯¯ç‡>1%: 5åˆ†é’Ÿå†…å‘Šè­¦
â”œâ”€ æ•°æ®åº“å“åº”>500ms: å‘Šè­¦
â”œâ”€ å†…å­˜ä½¿ç”¨>80%: å‘Šè­¦
â””â”€ ç£ç›˜ä½¿ç”¨>90%: å‘Šè­¦
```

#### 18.5.2 æ—¥å¿—è¦æ±‚
```
âœ… æ—¥å¿—è§„èŒƒ:
1. ç»“æ„åŒ–æ—¥å¿—æ ¼å¼ (JSON)
2. åŒ…å«è¿½è¸ªID (TraceID)
3. ç”¨æˆ·æ“ä½œå®Œæ•´è®°å½•
4. é”™è¯¯å †æ ˆå®Œæ•´ä¿å­˜
5. æ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ•
6. æ—¥å¿—ä¿ç•™90å¤©ä»¥ä¸Š

æ—¥å¿—çº§åˆ«:
â”œâ”€ ERROR: ç³»ç»Ÿé”™è¯¯ã€å¼‚å¸¸
â”œâ”€ WARN: ä¸šåŠ¡è­¦å‘Šã€å¤±è´¥é‡è¯•
â”œâ”€ INFO: é‡è¦ä¸šåŠ¡æ“ä½œ
â””â”€ DEBUG: å¼€å‘è°ƒè¯•ä¿¡æ¯
```

#### 18.5.3 æŠ¥è¡¨è¦æ±‚
```
âœ… è¿è¥æŠ¥è¡¨:
1. æ¯æ—¥æ”¶å…¥æŠ¥è¡¨
2. ç”¨æˆ·å¢é•¿æŠ¥è¡¨
3. ç§¯åˆ†æµé€šæŠ¥è¡¨
4. ä¼šå‘˜ç­‰çº§åˆ†å¸ƒ
5. å¥—é¤é”€å”®æ’è¡Œ
6. è½¬åŒ–ç‡åˆ†æ

è´¢åŠ¡æŠ¥è¡¨:
â”œâ”€ æœˆåº¦æ”¶å…¥æ˜ç»†
â”œâ”€ é€€æ¬¾ç»Ÿè®¡
â”œâ”€ æ‰‹ç»­è´¹ç»Ÿè®¡
â”œâ”€ ç”¨æˆ·ARPUåˆ†æ
â””â”€ æ”¶å…¥è¶‹åŠ¿é¢„æµ‹
```

---

## æ€»ç»“

### ä»·å€¼äº¤ä»˜

æœ¬ææ¡ˆæ„å»ºäº†ä¸€å¥—**å®Œæ•´ã€ä¸“ä¸šã€ä¼ä¸šçº§**çš„ä¼šå‘˜ç§¯åˆ†å¥—é¤ä½“ç³»ï¼ŒåŒ…å«:

**æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**:
- âœ… å¥—é¤ç®¡ç† (å¤šå±‚çº§å®šä»·ç­–ç•¥)
- âœ… ç”¨æˆ·ç§¯åˆ† (ä½™é¢/æœ‰æ•ˆæœŸ/æµæ°´ç®¡ç†)
- âœ… è®¢å•æ”¯ä»˜ (å¤šé“¾æ”¯ä»˜/è‡ªåŠ¨ç¡®è®¤)
- âœ… ç§¯åˆ†æ¶ˆè´¹ (å…è´¹é¢åº¦/æŒ‰éœ€ä»˜è´¹)
- âœ… ä¼šå‘˜ä½“ç³» (ç­‰çº§/æŠ˜æ‰£/æƒç›Š)
- âœ… ç®¡ç†åå° (æ•°æ®åˆ†æ/è¿è¥ç®¡ç†)

**æŠ€æœ¯æ¶æ„**:
- âœ… æ•°æ®åº“è®¾è®¡ (9å¼ æ ¸å¿ƒè¡¨)
- âœ… RESTful API (40+æ¥å£)
- âœ… å‰ç«¯UI (å“åº”å¼/å¤šè¯­è¨€)
- âœ… å®‰å…¨æ€§è®¾è®¡ (åŠ å¯†/é‰´æƒ/å®¡è®¡)
- âœ… æ€§èƒ½ä¼˜åŒ– (ç¼“å­˜/ç´¢å¼•/å¹¶å‘)
- âœ… ç›‘æ§å‘Šè­¦ (ä¸šåŠ¡/ç³»ç»Ÿ/å®‰å…¨)

**è¿è¥æ”¯æŒ**:
- âœ… æ–°ç”¨æˆ·å¼•å¯¼æµç¨‹
- âœ… æ¨èå¥–åŠ±æœºåˆ¶
- âœ… ä¿ƒé”€æ´»åŠ¨ç³»ç»Ÿ
- âœ… ç”¨æˆ·ç•™å­˜ç­–ç•¥
- âœ… A/Bæµ‹è¯•æ¡†æ¶
- âœ… æ•°æ®é©±åŠ¨ä¼˜åŒ–

**äº¤ä»˜è´¨é‡**:
- âœ… å¼€å‘å‘¨æœŸ: 8å‘¨ (4ä¸ªSprint)
- âœ… æµ‹è¯•è¦†ç›–ç‡: >85%
- âœ… APIå“åº”æ—¶é—´: <200ms
- âœ… ç³»ç»Ÿå¯ç”¨æ€§: >99.9%
- âœ… å®‰å…¨ç­‰çº§: ä¼ä¸šçº§
- âœ… å¯ç»´æŠ¤æ€§: æ¨¡å—åŒ–è®¾è®¡

### å•†ä¸šä»·å€¼

**æ”¶å…¥å¢é•¿**:
- ä»˜è´¹è½¬åŒ–ç‡é¢„æœŸæå‡è‡³5%+
- ARPU (å¹³å‡æ¯ç”¨æˆ·æ”¶å…¥) > $15/æœˆ
- å¹´åº¦æ”¶å…¥å¢é•¿: $500K+ (åŸºäº1000ä»˜è´¹ç”¨æˆ·)

**ç”¨æˆ·ä»·å€¼**:
- å…è´¹è¯•ç”¨é™ä½é—¨æ§›
- ç§¯åˆ†åˆ¶çµæ´»æ¶ˆè´¹
- ä¼šå‘˜æƒç›Šæ¿€åŠ±ç•™å­˜
- æ¨èå¥–åŠ±å£ç¢‘ä¼ æ’­

**å¹³å°ä»·å€¼**:
- å»ºç«‹å¯æŒç»­å•†ä¸šæ¨¡å¼
- ç§¯ç´¯ç”¨æˆ·è¡Œä¸ºæ•°æ®
- ä¼˜åŒ–äº§å“è¿­ä»£æ–¹å‘
- æå‡å“ç‰Œç«äº‰åŠ›

### æŠ€æœ¯äº®ç‚¹

1. **çµæ´»å¥—é¤ä½“ç³»** - æ”¯æŒåŠ¨æ€é…ç½®ã€å¤šè¯­è¨€ã€å¤šå±‚çº§å®šä»·
2. **æ™ºèƒ½ç§¯åˆ†ç³»ç»Ÿ** - æœ‰æ•ˆæœŸç®¡ç†ã€ä½™é¢æ˜ç»†ã€æµæ°´å¯è¿½æº¯
3. **å®‰å…¨æ”¯ä»˜æœºåˆ¶** - å¤šé“¾æ”¯æŒã€è‡ªåŠ¨ç¡®è®¤ã€é˜²é‡æ”¾æ”»å‡»
4. **ä¼šå‘˜ç­‰çº§ç³»ç»Ÿ** - è‡ªåŠ¨åŒ–ç­‰çº§è®¡ç®—ã€å·®å¼‚åŒ–æƒç›Š
5. **é«˜æ€§èƒ½æ¶æ„** - ç¼“å­˜ä¼˜åŒ–ã€æ•°æ®åº“ä¼˜åŒ–ã€å¹¶å‘å¤„ç†
6. **ä¼ä¸šçº§å®‰å…¨** - æ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ã€å®¡è®¡æ—¥å¿—
7. **å®Œå–„ç›‘æ§** - ä¸šåŠ¡ç›‘æ§ã€ç³»ç»Ÿç›‘æ§ã€å¼‚å¸¸å‘Šè­¦
8. **å›½é™…åŒ–æ”¯æŒ** - å¤šè¯­è¨€ã€å¤šå¸ç§ã€å¤šæ—¶åŒºé€‚é…

---

**ææ¡ˆä»·å€¼: $1,500 USD**  
**å¼€å‘å‘¨æœŸ: 8å‘¨**  
**äº¤ä»˜è´¨é‡: ç”Ÿäº§å°±ç»ª**

